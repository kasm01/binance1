symbol,side,qty,entry_price,notional,interval,opened_at,sl_price,tp_price,trailing_pct,atr_value,highest_price,lowest_price,meta,closed_at,close_price,realized_pnl,close_reason,bt_symbol,bt_interval,bt_bar,bt_time,bt_signal,bt_price,bt_p_used,bt_p_single,bt_p_1m,bt_p_5m,bt_p_15m,bt_p_1h,whale_dir,whale_score,whale_on,whale_alignment,whale_thr,model_confidence_factor,bt_atr
BTCUSDT,long,0.0005233619382553169,92839.33,48.58857169512499,5m,2025-12-14T15:43:28.500073,92589.32285714286,93339.34428571428,0.01,166.67142857142815,93209.99,92839.33,"{'probs': {'p_used': 0.9435428678049995, 'p_single': 0.7267305791378021}, 'extra': {'mtf_debug': {'per_interval': {'1m': {'p_last': 1.0, 'weight': 0.3, 'auc': 0.49900912892628313, 'best_side': 'short', 'debug': {'mode': 'sgd_only', 'p_sgd_mean': 1.0, 'p_lstm_mean': 0.5, 'p_hybrid_mean': 1.0, 'best_auc': 0.49900912892628313, 'best_side': 'short', 'use_lstm_hybrid': True, 'lstm_used': False, 'error': 'in user code:\n\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2440, in predict_function  *\n        return step_function(self, iterator)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2425, in step_function  **\n        outputs = model.distribute_strategy.run(run_step, args=(data,))\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2413, in run_step  **\n        outputs = model.predict_step(data)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2381, in predict_step\n        return self(x, training=False)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/utils/traceback_utils.py"", line 70, in error_handler\n        raise e.with_traceback(filtered_tb) from None\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/input_spec.py"", line 298, in assert_input_compatibility\n        raise ValueError(\n\n    ValueError: Input 0 of layer ""sequential"" is incompatible with the layer: expected shape=(None, 50, 22), found shape=(None, 32, 22)\n'}}, '5m': {'p_last': 0.7267305791378021, 'weight': 0.3, 'auc': 0.5136681486331411, 'best_side': 'long', 'debug': {'mode': 'lstm+sgd', 'p_sgd_mean': 1.0, 'p_lstm_mean': 0.5445509552955627, 'p_hybrid_mean': 0.7267305806205049, 'best_auc': 0.5136681486331411, 'best_side': 'long', 'use_lstm_hybrid': True, 'lstm_used': True, 'p_long_mean': 0.9897624254226685, 'p_short_mean': 0.09933959692716599}}, '15m': {'p_last': 1.0, 'weight': 0.3, 'auc': 0.5126647075075981, 'best_side': 'long', 'debug': {'mode': 'sgd_only', 'p_sgd_mean': 1.0, 'p_lstm_mean': 0.5, 'p_hybrid_mean': 1.0, 'best_auc': 0.5126647075075981, 'best_side': 'long', 'use_lstm_hybrid': True, 'lstm_used': False, 'error': 'in user code:\n\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2440, in predict_function  *\n        return step_function(self, iterator)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2425, in step_function  **\n        outputs = model.distribute_strategy.run(run_step, args=(data,))\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2413, in run_step  **\n        outputs = model.predict_step(data)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2381, in predict_step\n        return self(x, training=False)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/utils/traceback_utils.py"", line 70, in error_handler\n        raise e.with_traceback(filtered_tb) from None\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/input_spec.py"", line 298, in assert_input_compatibility\n        raise ValueError(\n\n    ValueError: Input 0 of layer ""sequential"" is incompatible with the layer: expected shape=(None, 50, 22), found shape=(None, 32, 22)\n'}}, '1h': {'p_last': 1.0, 'weight': 0.5520898081663274, 'auc': 0.5520898081663274, 'best_side': 'long', 'debug': {'mode': 'sgd_only', 'p_sgd_mean': 1.0, 'p_lstm_mean': 0.5, 'p_hybrid_mean': 1.0, 'best_auc': 0.5520898081663274, 'best_side': 'long', 'use_lstm_hybrid': True, 'lstm_used': False, 'error': 'in user code:\n\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2440, in predict_function  *\n        return step_function(self, iterator)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2425, in step_function  **\n        outputs = model.distribute_strategy.run(run_step, args=(data,))\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2413, in run_step  **\n        outputs = model.predict_step(data)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2381, in predict_step\n        return self(x, training=False)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/utils/traceback_utils.py"", line 70, in error_handler\n        raise e.with_traceback(filtered_tb) from None\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/input_spec.py"", line 298, in assert_input_compatibility\n        raise ValueError(\n\n    ValueError: Input 0 of layer ""sequential"" is incompatible with the layer: expected shape=(None, 50, 22), found shape=(None, 32, 22)\n'}}}, 'intervals_used': ['1m', '5m', '15m', '1h'], 'weights_raw': [0.3, 0.3, 0.3, 0.5520898081663274], 'weights_norm': [0.20659879183287883, 0.20659879183287883, 0.20659879183287883, 0.3802036245013636], 'n_used': 4, 'ensemble_p': 0.9435428678049995}, 'whale_dir': 'none', 'whale_score': 0.0, 'whale_on': False, 'whale_alignment': 'no_whale', 'whale_thr': 0.5, 'model_confidence_factor': 0.9435428678049995, 'atr': 166.67142857142815}}",2025-12-14T15:43:50.268890,93358.79,0.27186559244610264,TP_HIT,BTCUSDT,5m,225,225,long,93358.79,0.9435428678049995,0.7267305791378021,1.0,0.7267305791378021,1.0,1.0,none,0.0,False,no_whale,0.5,0.9435428678049995,129.48142857142582
BTCUSDT,long,0.0005204498868839774,93358.79,48.58857169512499,5m,2025-12-14T15:43:50.269495,93164.56785714286,93747.23428571426,0.01,129.48142857142582,93358.79,93358.79,"{'probs': {'p_used': 0.9435428678049995, 'p_single': 0.7267305791378021}, 'extra': {'mtf_debug': {'per_interval': {'1m': {'p_last': 1.0, 'weight': 0.3, 'auc': 0.49900912892628313, 'best_side': 'short', 'debug': {'mode': 'sgd_only', 'p_sgd_mean': 1.0, 'p_lstm_mean': 0.5, 'p_hybrid_mean': 1.0, 'best_auc': 0.49900912892628313, 'best_side': 'short', 'use_lstm_hybrid': True, 'lstm_used': False, 'error': 'in user code:\n\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2440, in predict_function  *\n        return step_function(self, iterator)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2425, in step_function  **\n        outputs = model.distribute_strategy.run(run_step, args=(data,))\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2413, in run_step  **\n        outputs = model.predict_step(data)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2381, in predict_step\n        return self(x, training=False)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/utils/traceback_utils.py"", line 70, in error_handler\n        raise e.with_traceback(filtered_tb) from None\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/input_spec.py"", line 298, in assert_input_compatibility\n        raise ValueError(\n\n    ValueError: Input 0 of layer ""sequential"" is incompatible with the layer: expected shape=(None, 50, 22), found shape=(None, 32, 22)\n'}}, '5m': {'p_last': 0.7267305791378021, 'weight': 0.3, 'auc': 0.5136681486331411, 'best_side': 'long', 'debug': {'mode': 'lstm+sgd', 'p_sgd_mean': 1.0, 'p_lstm_mean': 0.5445509552955627, 'p_hybrid_mean': 0.7267305807202266, 'best_auc': 0.5136681486331411, 'best_side': 'long', 'use_lstm_hybrid': True, 'lstm_used': True, 'p_long_mean': 0.9897623658180237, 'p_short_mean': 0.09933958947658539}}, '15m': {'p_last': 1.0, 'weight': 0.3, 'auc': 0.5126647075075981, 'best_side': 'long', 'debug': {'mode': 'sgd_only', 'p_sgd_mean': 1.0, 'p_lstm_mean': 0.5, 'p_hybrid_mean': 1.0, 'best_auc': 0.5126647075075981, 'best_side': 'long', 'use_lstm_hybrid': True, 'lstm_used': False, 'error': 'in user code:\n\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2440, in predict_function  *\n        return step_function(self, iterator)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2425, in step_function  **\n        outputs = model.distribute_strategy.run(run_step, args=(data,))\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2413, in run_step  **\n        outputs = model.predict_step(data)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2381, in predict_step\n        return self(x, training=False)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/utils/traceback_utils.py"", line 70, in error_handler\n        raise e.with_traceback(filtered_tb) from None\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/input_spec.py"", line 298, in assert_input_compatibility\n        raise ValueError(\n\n    ValueError: Input 0 of layer ""sequential"" is incompatible with the layer: expected shape=(None, 50, 22), found shape=(None, 32, 22)\n'}}, '1h': {'p_last': 1.0, 'weight': 0.5520898081663274, 'auc': 0.5520898081663274, 'best_side': 'long', 'debug': {'mode': 'sgd_only', 'p_sgd_mean': 1.0, 'p_lstm_mean': 0.5, 'p_hybrid_mean': 1.0, 'best_auc': 0.5520898081663274, 'best_side': 'long', 'use_lstm_hybrid': True, 'lstm_used': False, 'error': 'in user code:\n\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2440, in predict_function  *\n        return step_function(self, iterator)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2425, in step_function  **\n        outputs = model.distribute_strategy.run(run_step, args=(data,))\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2413, in run_step  **\n        outputs = model.predict_step(data)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2381, in predict_step\n        return self(x, training=False)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/utils/traceback_utils.py"", line 70, in error_handler\n        raise e.with_traceback(filtered_tb) from None\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/input_spec.py"", line 298, in assert_input_compatibility\n        raise ValueError(\n\n    ValueError: Input 0 of layer ""sequential"" is incompatible with the layer: expected shape=(None, 50, 22), found shape=(None, 32, 22)\n'}}}, 'intervals_used': ['1m', '5m', '15m', '1h'], 'weights_raw': [0.3, 0.3, 0.3, 0.5520898081663274], 'weights_norm': [0.20659879183287883, 0.20659879183287883, 0.20659879183287883, 0.3802036245013636], 'n_used': 4, 'ensemble_p': 0.9435428678049995}, 'whale_dir': 'none', 'whale_score': 0.0, 'whale_on': False, 'whale_alignment': 'no_whale', 'whale_thr': 0.5, 'model_confidence_factor': 0.9435428678049995, 'atr': 129.48142857142582}}",2025-12-14T15:43:52.215140,93120.2,-0.12417413851164634,SL_HIT,BTCUSDT,5m,227,227,long,93120.2,0.9435428678049995,0.7267305791378021,1.0,0.7267305791378021,1.0,1.0,none,0.0,False,no_whale,0.5,0.9435428678049995,140.8399999999965
BTCUSDT,long,0.0005217833691843982,93120.2,48.58857169512499,5m,2025-12-14T15:43:52.215787,92908.94,93542.71999999999,0.01,140.8399999999965,93120.2,93120.2,"{'probs': {'p_used': 0.9435428678049995, 'p_single': 0.7267305791378021}, 'extra': {'mtf_debug': {'per_interval': {'1m': {'p_last': 1.0, 'weight': 0.3, 'auc': 0.49900912892628313, 'best_side': 'short', 'debug': {'mode': 'sgd_only', 'p_sgd_mean': 1.0, 'p_lstm_mean': 0.5, 'p_hybrid_mean': 1.0, 'best_auc': 0.49900912892628313, 'best_side': 'short', 'use_lstm_hybrid': True, 'lstm_used': False, 'error': 'in user code:\n\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2440, in predict_function  *\n        return step_function(self, iterator)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2425, in step_function  **\n        outputs = model.distribute_strategy.run(run_step, args=(data,))\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2413, in run_step  **\n        outputs = model.predict_step(data)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2381, in predict_step\n        return self(x, training=False)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/utils/traceback_utils.py"", line 70, in error_handler\n        raise e.with_traceback(filtered_tb) from None\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/input_spec.py"", line 298, in assert_input_compatibility\n        raise ValueError(\n\n    ValueError: Input 0 of layer ""sequential"" is incompatible with the layer: expected shape=(None, 50, 22), found shape=(None, 32, 22)\n'}}, '5m': {'p_last': 0.7267305791378021, 'weight': 0.3, 'auc': 0.5136681486331411, 'best_side': 'long', 'debug': {'mode': 'lstm+sgd', 'p_sgd_mean': 1.0, 'p_lstm_mean': 0.5445509552955627, 'p_hybrid_mean': 0.7267305807063458, 'best_auc': 0.5136681486331411, 'best_side': 'long', 'use_lstm_hybrid': True, 'lstm_used': True, 'p_long_mean': 0.9897623658180237, 'p_short_mean': 0.09933959692716599}}, '15m': {'p_last': 1.0, 'weight': 0.3, 'auc': 0.5126647075075981, 'best_side': 'long', 'debug': {'mode': 'sgd_only', 'p_sgd_mean': 1.0, 'p_lstm_mean': 0.5, 'p_hybrid_mean': 1.0, 'best_auc': 0.5126647075075981, 'best_side': 'long', 'use_lstm_hybrid': True, 'lstm_used': False, 'error': 'in user code:\n\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2440, in predict_function  *\n        return step_function(self, iterator)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2425, in step_function  **\n        outputs = model.distribute_strategy.run(run_step, args=(data,))\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2413, in run_step  **\n        outputs = model.predict_step(data)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2381, in predict_step\n        return self(x, training=False)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/utils/traceback_utils.py"", line 70, in error_handler\n        raise e.with_traceback(filtered_tb) from None\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/input_spec.py"", line 298, in assert_input_compatibility\n        raise ValueError(\n\n    ValueError: Input 0 of layer ""sequential"" is incompatible with the layer: expected shape=(None, 50, 22), found shape=(None, 32, 22)\n'}}, '1h': {'p_last': 1.0, 'weight': 0.5520898081663274, 'auc': 0.5520898081663274, 'best_side': 'long', 'debug': {'mode': 'sgd_only', 'p_sgd_mean': 1.0, 'p_lstm_mean': 0.5, 'p_hybrid_mean': 1.0, 'best_auc': 0.5520898081663274, 'best_side': 'long', 'use_lstm_hybrid': True, 'lstm_used': False, 'error': 'in user code:\n\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2440, in predict_function  *\n        return step_function(self, iterator)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2425, in step_function  **\n        outputs = model.distribute_strategy.run(run_step, args=(data,))\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2413, in run_step  **\n        outputs = model.predict_step(data)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2381, in predict_step\n        return self(x, training=False)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/utils/traceback_utils.py"", line 70, in error_handler\n        raise e.with_traceback(filtered_tb) from None\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/input_spec.py"", line 298, in assert_input_compatibility\n        raise ValueError(\n\n    ValueError: Input 0 of layer ""sequential"" is incompatible with the layer: expected shape=(None, 50, 22), found shape=(None, 32, 22)\n'}}}, 'intervals_used': ['1m', '5m', '15m', '1h'], 'weights_raw': [0.3, 0.3, 0.3, 0.5520898081663274], 'weights_norm': [0.20659879183287883, 0.20659879183287883, 0.20659879183287883, 0.3802036245013636], 'n_used': 4, 'ensemble_p': 0.9435428678049995}, 'whale_dir': 'none', 'whale_score': 0.0, 'whale_on': False, 'whale_alignment': 'no_whale', 'whale_thr': 0.5, 'model_confidence_factor': 0.9435428678049995, 'atr': 140.8399999999965}}",2025-12-14T15:44:00.043579,92751.28,-0.19249632055950727,SL_HIT,BTCUSDT,5m,235,235,long,92751.28,0.9435428739621232,0.7267306089401245,1.0,0.7267306089401245,1.0,1.0,short,0.7440900515247848,True,opposed,0.5,0.28306286218863697,152.26928571428496
BTCUSDT,long,0.00013996879967593232,92751.28,12.982285330006308,5m,2025-12-14T15:44:00.044219,92522.87607142857,93208.08785714285,0.01,152.26928571428496,93093.03,92751.28,"{'probs': {'p_used': 0.9435428739621232, 'p_single': 0.7267306089401245}, 'extra': {'mtf_debug': {'per_interval': {'1m': {'p_last': 1.0, 'weight': 0.3, 'auc': 0.49900912892628313, 'best_side': 'short', 'debug': {'mode': 'sgd_only', 'p_sgd_mean': 1.0, 'p_lstm_mean': 0.5, 'p_hybrid_mean': 1.0, 'best_auc': 0.49900912892628313, 'best_side': 'short', 'use_lstm_hybrid': True, 'lstm_used': False, 'error': 'in user code:\n\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2440, in predict_function  *\n        return step_function(self, iterator)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2425, in step_function  **\n        outputs = model.distribute_strategy.run(run_step, args=(data,))\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2413, in run_step  **\n        outputs = model.predict_step(data)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2381, in predict_step\n        return self(x, training=False)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/utils/traceback_utils.py"", line 70, in error_handler\n        raise e.with_traceback(filtered_tb) from None\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/input_spec.py"", line 298, in assert_input_compatibility\n        raise ValueError(\n\n    ValueError: Input 0 of layer ""sequential"" is incompatible with the layer: expected shape=(None, 50, 22), found shape=(None, 32, 22)\n'}}, '5m': {'p_last': 0.7267306089401245, 'weight': 0.3, 'auc': 0.5136681486331411, 'best_side': 'long', 'debug': {'mode': 'lstm+sgd', 'p_sgd_mean': 1.0, 'p_lstm_mean': 0.544550895690918, 'p_hybrid_mean': 0.7267305807794558, 'best_auc': 0.5136681486331411, 'best_side': 'long', 'use_lstm_hybrid': True, 'lstm_used': True, 'p_long_mean': 0.9897623062133789, 'p_short_mean': 0.09933958947658539}}, '15m': {'p_last': 1.0, 'weight': 0.3, 'auc': 0.5126647075075981, 'best_side': 'long', 'debug': {'mode': 'sgd_only', 'p_sgd_mean': 1.0, 'p_lstm_mean': 0.5, 'p_hybrid_mean': 1.0, 'best_auc': 0.5126647075075981, 'best_side': 'long', 'use_lstm_hybrid': True, 'lstm_used': False, 'error': 'in user code:\n\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2440, in predict_function  *\n        return step_function(self, iterator)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2425, in step_function  **\n        outputs = model.distribute_strategy.run(run_step, args=(data,))\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2413, in run_step  **\n        outputs = model.predict_step(data)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2381, in predict_step\n        return self(x, training=False)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/utils/traceback_utils.py"", line 70, in error_handler\n        raise e.with_traceback(filtered_tb) from None\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/input_spec.py"", line 298, in assert_input_compatibility\n        raise ValueError(\n\n    ValueError: Input 0 of layer ""sequential"" is incompatible with the layer: expected shape=(None, 50, 22), found shape=(None, 32, 22)\n'}}, '1h': {'p_last': 1.0, 'weight': 0.5520898081663274, 'auc': 0.5520898081663274, 'best_side': 'long', 'debug': {'mode': 'sgd_only', 'p_sgd_mean': 1.0, 'p_lstm_mean': 0.5, 'p_hybrid_mean': 1.0, 'best_auc': 0.5520898081663274, 'best_side': 'long', 'use_lstm_hybrid': True, 'lstm_used': False, 'error': 'in user code:\n\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2440, in predict_function  *\n        return step_function(self, iterator)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2425, in step_function  **\n        outputs = model.distribute_strategy.run(run_step, args=(data,))\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2413, in run_step  **\n        outputs = model.predict_step(data)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2381, in predict_step\n        return self(x, training=False)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/utils/traceback_utils.py"", line 70, in error_handler\n        raise e.with_traceback(filtered_tb) from None\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/input_spec.py"", line 298, in assert_input_compatibility\n        raise ValueError(\n\n    ValueError: Input 0 of layer ""sequential"" is incompatible with the layer: expected shape=(None, 50, 22), found shape=(None, 32, 22)\n'}}}, 'intervals_used': ['1m', '5m', '15m', '1h'], 'weights_raw': [0.3, 0.3, 0.3, 0.5520898081663274], 'weights_norm': [0.20659879183287883, 0.20659879183287883, 0.20659879183287883, 0.3802036245013636], 'n_used': 4, 'ensemble_p': 0.9435428739621232}, 'whale_dir': 'short', 'whale_score': 0.7440900515247848, 'whale_on': True, 'whale_alignment': 'opposed', 'whale_thr': 0.5, 'model_confidence_factor': 0.28306286218863697, 'atr': 152.26928571428496}}",2025-12-14T15:44:41.063406,93209.38,0.06411970713154541,TP_HIT,BTCUSDT,5m,265,265,long,93209.38,0.9435428678049995,0.7267305791378021,1.0,0.7267305791378021,1.0,1.0,long,0.5894701360742148,True,aligned,0.5,0.9435428678049995,140.47857142857225
BTCUSDT,long,0.0005212841421660029,93209.38,48.58857169512499,5m,2025-12-14T15:44:41.064344,92998.66214285715,93630.81571428572,0.01,140.47857142857225,93212.7,93209.38,"{'probs': {'p_used': 0.9435428678049995, 'p_single': 0.7267305791378021}, 'extra': {'mtf_debug': {'per_interval': {'1m': {'p_last': 1.0, 'weight': 0.3, 'auc': 0.49900912892628313, 'best_side': 'short', 'debug': {'mode': 'sgd_only', 'p_sgd_mean': 1.0, 'p_lstm_mean': 0.5, 'p_hybrid_mean': 1.0, 'best_auc': 0.49900912892628313, 'best_side': 'short', 'use_lstm_hybrid': True, 'lstm_used': False, 'error': 'in user code:\n\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2440, in predict_function  *\n        return step_function(self, iterator)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2425, in step_function  **\n        outputs = model.distribute_strategy.run(run_step, args=(data,))\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2413, in run_step  **\n        outputs = model.predict_step(data)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2381, in predict_step\n        return self(x, training=False)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/utils/traceback_utils.py"", line 70, in error_handler\n        raise e.with_traceback(filtered_tb) from None\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/input_spec.py"", line 298, in assert_input_compatibility\n        raise ValueError(\n\n    ValueError: Input 0 of layer ""sequential"" is incompatible with the layer: expected shape=(None, 50, 22), found shape=(None, 32, 22)\n'}}, '5m': {'p_last': 0.7267305791378021, 'weight': 0.3, 'auc': 0.5136681486331411, 'best_side': 'long', 'debug': {'mode': 'lstm+sgd', 'p_sgd_mean': 1.0, 'p_lstm_mean': 0.5445509552955627, 'p_hybrid_mean': 0.7267305807063456, 'best_auc': 0.5136681486331411, 'best_side': 'long', 'use_lstm_hybrid': True, 'lstm_used': True, 'p_long_mean': 0.9897623062133789, 'p_short_mean': 0.09933959692716599}}, '15m': {'p_last': 1.0, 'weight': 0.3, 'auc': 0.5126647075075981, 'best_side': 'long', 'debug': {'mode': 'sgd_only', 'p_sgd_mean': 1.0, 'p_lstm_mean': 0.5, 'p_hybrid_mean': 1.0, 'best_auc': 0.5126647075075981, 'best_side': 'long', 'use_lstm_hybrid': True, 'lstm_used': False, 'error': 'in user code:\n\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2440, in predict_function  *\n        return step_function(self, iterator)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2425, in step_function  **\n        outputs = model.distribute_strategy.run(run_step, args=(data,))\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2413, in run_step  **\n        outputs = model.predict_step(data)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2381, in predict_step\n        return self(x, training=False)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/utils/traceback_utils.py"", line 70, in error_handler\n        raise e.with_traceback(filtered_tb) from None\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/input_spec.py"", line 298, in assert_input_compatibility\n        raise ValueError(\n\n    ValueError: Input 0 of layer ""sequential"" is incompatible with the layer: expected shape=(None, 50, 22), found shape=(None, 32, 22)\n'}}, '1h': {'p_last': 1.0, 'weight': 0.5520898081663274, 'auc': 0.5520898081663274, 'best_side': 'long', 'debug': {'mode': 'sgd_only', 'p_sgd_mean': 1.0, 'p_lstm_mean': 0.5, 'p_hybrid_mean': 1.0, 'best_auc': 0.5520898081663274, 'best_side': 'long', 'use_lstm_hybrid': True, 'lstm_used': False, 'error': 'in user code:\n\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2440, in predict_function  *\n        return step_function(self, iterator)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2425, in step_function  **\n        outputs = model.distribute_strategy.run(run_step, args=(data,))\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2413, in run_step  **\n        outputs = model.predict_step(data)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2381, in predict_step\n        return self(x, training=False)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/utils/traceback_utils.py"", line 70, in error_handler\n        raise e.with_traceback(filtered_tb) from None\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/input_spec.py"", line 298, in assert_input_compatibility\n        raise ValueError(\n\n    ValueError: Input 0 of layer ""sequential"" is incompatible with the layer: expected shape=(None, 50, 22), found shape=(None, 32, 22)\n'}}}, 'intervals_used': ['1m', '5m', '15m', '1h'], 'weights_raw': [0.3, 0.3, 0.3, 0.5520898081663274], 'weights_norm': [0.20659879183287883, 0.20659879183287883, 0.20659879183287883, 0.3802036245013636], 'n_used': 4, 'ensemble_p': 0.9435428678049995}, 'whale_dir': 'long', 'whale_score': 0.5894701360742148, 'whale_on': True, 'whale_alignment': 'aligned', 'whale_thr': 0.5, 'model_confidence_factor': 0.9435428678049995, 'atr': 140.47857142857225}}",2025-12-14T15:44:55.795811,91754.55,-0.758379808547367,SL_HIT,BTCUSDT,5m,269,269,long,91754.55,0.9435428678049995,0.7267305791378021,1.0,0.7267305791378021,1.0,1.0,short,1.0,True,opposed,0.5,0.28306286034149986,233.07428571428423
BTCUSDT,long,0.00010898642083689582,91754.55,10.0,5m,2025-12-14T15:44:55.796587,91404.93857142857,92453.77285714286,0.01,233.07428571428423,92345.16,91754.55,"{'probs': {'p_used': 0.9435428678049995, 'p_single': 0.7267305791378021}, 'extra': {'mtf_debug': {'per_interval': {'1m': {'p_last': 1.0, 'weight': 0.3, 'auc': 0.49900912892628313, 'best_side': 'short', 'debug': {'mode': 'sgd_only', 'p_sgd_mean': 1.0, 'p_lstm_mean': 0.5, 'p_hybrid_mean': 1.0, 'best_auc': 0.49900912892628313, 'best_side': 'short', 'use_lstm_hybrid': True, 'lstm_used': False, 'error': 'in user code:\n\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2440, in predict_function  *\n        return step_function(self, iterator)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2425, in step_function  **\n        outputs = model.distribute_strategy.run(run_step, args=(data,))\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2413, in run_step  **\n        outputs = model.predict_step(data)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2381, in predict_step\n        return self(x, training=False)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/utils/traceback_utils.py"", line 70, in error_handler\n        raise e.with_traceback(filtered_tb) from None\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/input_spec.py"", line 298, in assert_input_compatibility\n        raise ValueError(\n\n    ValueError: Input 0 of layer ""sequential"" is incompatible with the layer: expected shape=(None, 50, 22), found shape=(None, 32, 22)\n'}}, '5m': {'p_last': 0.7267305791378021, 'weight': 0.3, 'auc': 0.5136681486331411, 'best_side': 'long', 'debug': {'mode': 'lstm+sgd', 'p_sgd_mean': 1.0, 'p_lstm_mean': 0.5445509552955627, 'p_hybrid_mean': 0.7267305806831079, 'best_auc': 0.5136681486331411, 'best_side': 'long', 'use_lstm_hybrid': True, 'lstm_used': True, 'p_long_mean': 0.9897623062133789, 'p_short_mean': 0.09933958947658539}}, '15m': {'p_last': 1.0, 'weight': 0.3, 'auc': 0.5126647075075981, 'best_side': 'long', 'debug': {'mode': 'sgd_only', 'p_sgd_mean': 1.0, 'p_lstm_mean': 0.5, 'p_hybrid_mean': 1.0, 'best_auc': 0.5126647075075981, 'best_side': 'long', 'use_lstm_hybrid': True, 'lstm_used': False, 'error': 'in user code:\n\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2440, in predict_function  *\n        return step_function(self, iterator)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2425, in step_function  **\n        outputs = model.distribute_strategy.run(run_step, args=(data,))\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2413, in run_step  **\n        outputs = model.predict_step(data)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2381, in predict_step\n        return self(x, training=False)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/utils/traceback_utils.py"", line 70, in error_handler\n        raise e.with_traceback(filtered_tb) from None\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/input_spec.py"", line 298, in assert_input_compatibility\n        raise ValueError(\n\n    ValueError: Input 0 of layer ""sequential"" is incompatible with the layer: expected shape=(None, 50, 22), found shape=(None, 32, 22)\n'}}, '1h': {'p_last': 1.0, 'weight': 0.5520898081663274, 'auc': 0.5520898081663274, 'best_side': 'long', 'debug': {'mode': 'sgd_only', 'p_sgd_mean': 1.0, 'p_lstm_mean': 0.5, 'p_hybrid_mean': 1.0, 'best_auc': 0.5520898081663274, 'best_side': 'long', 'use_lstm_hybrid': True, 'lstm_used': False, 'error': 'in user code:\n\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2440, in predict_function  *\n        return step_function(self, iterator)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2425, in step_function  **\n        outputs = model.distribute_strategy.run(run_step, args=(data,))\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2413, in run_step  **\n        outputs = model.predict_step(data)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2381, in predict_step\n        return self(x, training=False)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/utils/traceback_utils.py"", line 70, in error_handler\n        raise e.with_traceback(filtered_tb) from None\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/input_spec.py"", line 298, in assert_input_compatibility\n        raise ValueError(\n\n    ValueError: Input 0 of layer ""sequential"" is incompatible with the layer: expected shape=(None, 50, 22), found shape=(None, 32, 22)\n'}}}, 'intervals_used': ['1m', '5m', '15m', '1h'], 'weights_raw': [0.3, 0.3, 0.3, 0.5520898081663274], 'weights_norm': [0.20659879183287883, 0.20659879183287883, 0.20659879183287883, 0.3802036245013636], 'n_used': 4, 'ensemble_p': 0.9435428678049995}, 'whale_dir': 'short', 'whale_score': 1.0, 'whale_on': True, 'whale_alignment': 'opposed', 'whale_thr': 0.5, 'model_confidence_factor': 0.28306286034149986, 'atr': 233.07428571428423}}",2025-12-14T15:45:14.790597,92540.06,0.08560992343158946,TP_HIT,BTCUSDT,5m,274,274,long,92540.06,0.9435428739621232,0.7267306089401245,1.0,0.7267306089401245,1.0,1.0,none,0.0,False,no_whale,0.5,0.9435428739621232,320.65499999999884
BTCUSDT,long,0.0005250544666715484,92540.06,48.58857184905308,5m,2025-12-14T15:45:14.791218,92059.0775,93502.025,0.01,320.65499999999884,92621.35,92540.06,"{'probs': {'p_used': 0.9435428739621232, 'p_single': 0.7267306089401245}, 'extra': {'mtf_debug': {'per_interval': {'1m': {'p_last': 1.0, 'weight': 0.3, 'auc': 0.49900912892628313, 'best_side': 'short', 'debug': {'mode': 'sgd_only', 'p_sgd_mean': 1.0, 'p_lstm_mean': 0.5, 'p_hybrid_mean': 1.0, 'best_auc': 0.49900912892628313, 'best_side': 'short', 'use_lstm_hybrid': True, 'lstm_used': False, 'error': 'in user code:\n\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2440, in predict_function  *\n        return step_function(self, iterator)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2425, in step_function  **\n        outputs = model.distribute_strategy.run(run_step, args=(data,))\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2413, in run_step  **\n        outputs = model.predict_step(data)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2381, in predict_step\n        return self(x, training=False)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/utils/traceback_utils.py"", line 70, in error_handler\n        raise e.with_traceback(filtered_tb) from None\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/input_spec.py"", line 298, in assert_input_compatibility\n        raise ValueError(\n\n    ValueError: Input 0 of layer ""sequential"" is incompatible with the layer: expected shape=(None, 50, 22), found shape=(None, 32, 22)\n'}}, '5m': {'p_last': 0.7267306089401245, 'weight': 0.3, 'auc': 0.5136681486331411, 'best_side': 'long', 'debug': {'mode': 'lstm+sgd', 'p_sgd_mean': 1.0, 'p_lstm_mean': 0.5445509552955627, 'p_hybrid_mean': 0.7267305808717557, 'best_auc': 0.5136681486331411, 'best_side': 'long', 'use_lstm_hybrid': True, 'lstm_used': True, 'p_long_mean': 0.9897623658180237, 'p_short_mean': 0.09933959692716599}}, '15m': {'p_last': 1.0, 'weight': 0.3, 'auc': 0.5126647075075981, 'best_side': 'long', 'debug': {'mode': 'sgd_only', 'p_sgd_mean': 1.0, 'p_lstm_mean': 0.5, 'p_hybrid_mean': 1.0, 'best_auc': 0.5126647075075981, 'best_side': 'long', 'use_lstm_hybrid': True, 'lstm_used': False, 'error': 'in user code:\n\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2440, in predict_function  *\n        return step_function(self, iterator)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2425, in step_function  **\n        outputs = model.distribute_strategy.run(run_step, args=(data,))\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2413, in run_step  **\n        outputs = model.predict_step(data)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2381, in predict_step\n        return self(x, training=False)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/utils/traceback_utils.py"", line 70, in error_handler\n        raise e.with_traceback(filtered_tb) from None\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/input_spec.py"", line 298, in assert_input_compatibility\n        raise ValueError(\n\n    ValueError: Input 0 of layer ""sequential"" is incompatible with the layer: expected shape=(None, 50, 22), found shape=(None, 32, 22)\n'}}, '1h': {'p_last': 1.0, 'weight': 0.5520898081663274, 'auc': 0.5520898081663274, 'best_side': 'long', 'debug': {'mode': 'sgd_only', 'p_sgd_mean': 1.0, 'p_lstm_mean': 0.5, 'p_hybrid_mean': 1.0, 'best_auc': 0.5520898081663274, 'best_side': 'long', 'use_lstm_hybrid': True, 'lstm_used': False, 'error': 'in user code:\n\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2440, in predict_function  *\n        return step_function(self, iterator)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2425, in step_function  **\n        outputs = model.distribute_strategy.run(run_step, args=(data,))\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2413, in run_step  **\n        outputs = model.predict_step(data)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2381, in predict_step\n        return self(x, training=False)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/utils/traceback_utils.py"", line 70, in error_handler\n        raise e.with_traceback(filtered_tb) from None\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/input_spec.py"", line 298, in assert_input_compatibility\n        raise ValueError(\n\n    ValueError: Input 0 of layer ""sequential"" is incompatible with the layer: expected shape=(None, 50, 22), found shape=(None, 32, 22)\n'}}}, 'intervals_used': ['1m', '5m', '15m', '1h'], 'weights_raw': [0.3, 0.3, 0.3, 0.5520898081663274], 'weights_norm': [0.20659879183287883, 0.20659879183287883, 0.20659879183287883, 0.3802036245013636], 'n_used': 4, 'ensemble_p': 0.9435428739621232}, 'whale_dir': 'none', 'whale_score': 0.0, 'whale_on': False, 'whale_alignment': 'no_whale', 'whale_thr': 0.5, 'model_confidence_factor': 0.9435428739621232, 'atr': 320.65499999999884}}",2025-12-14T15:45:26.062174,93502.76,0.5054699350646981,TP_HIT,BTCUSDT,5m,277,277,long,93502.76,0.9435428678049995,0.7267305791378021,1.0,0.7267305791378021,1.0,1.0,long,1.0,True,aligned,0.5,0.9435428678049995,452.67000000000036
BTCUSDT,long,0.0009353673522709381,93502.76,87.45942905122497,5m,2025-12-14T15:45:26.062796,92823.75499999999,94860.76999999999,0.01,452.67000000000036,93502.76,93502.76,"{'probs': {'p_used': 0.9435428678049995, 'p_single': 0.7267305791378021}, 'extra': {'mtf_debug': {'per_interval': {'1m': {'p_last': 1.0, 'weight': 0.3, 'auc': 0.49900912892628313, 'best_side': 'short', 'debug': {'mode': 'sgd_only', 'p_sgd_mean': 1.0, 'p_lstm_mean': 0.5, 'p_hybrid_mean': 1.0, 'best_auc': 0.49900912892628313, 'best_side': 'short', 'use_lstm_hybrid': True, 'lstm_used': False, 'error': 'in user code:\n\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2440, in predict_function  *\n        return step_function(self, iterator)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2425, in step_function  **\n        outputs = model.distribute_strategy.run(run_step, args=(data,))\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2413, in run_step  **\n        outputs = model.predict_step(data)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2381, in predict_step\n        return self(x, training=False)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/utils/traceback_utils.py"", line 70, in error_handler\n        raise e.with_traceback(filtered_tb) from None\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/input_spec.py"", line 298, in assert_input_compatibility\n        raise ValueError(\n\n    ValueError: Input 0 of layer ""sequential"" is incompatible with the layer: expected shape=(None, 50, 22), found shape=(None, 32, 22)\n'}}, '5m': {'p_last': 0.7267305791378021, 'weight': 0.3, 'auc': 0.5136681486331411, 'best_side': 'long', 'debug': {'mode': 'lstm+sgd', 'p_sgd_mean': 1.0, 'p_lstm_mean': 0.5445509552955627, 'p_hybrid_mean': 0.7267305806386387, 'best_auc': 0.5136681486331411, 'best_side': 'long', 'use_lstm_hybrid': True, 'lstm_used': True, 'p_long_mean': 0.9897623658180237, 'p_short_mean': 0.09933959692716599}}, '15m': {'p_last': 1.0, 'weight': 0.3, 'auc': 0.5126647075075981, 'best_side': 'long', 'debug': {'mode': 'sgd_only', 'p_sgd_mean': 1.0, 'p_lstm_mean': 0.5, 'p_hybrid_mean': 1.0, 'best_auc': 0.5126647075075981, 'best_side': 'long', 'use_lstm_hybrid': True, 'lstm_used': False, 'error': 'in user code:\n\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2440, in predict_function  *\n        return step_function(self, iterator)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2425, in step_function  **\n        outputs = model.distribute_strategy.run(run_step, args=(data,))\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2413, in run_step  **\n        outputs = model.predict_step(data)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2381, in predict_step\n        return self(x, training=False)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/utils/traceback_utils.py"", line 70, in error_handler\n        raise e.with_traceback(filtered_tb) from None\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/input_spec.py"", line 298, in assert_input_compatibility\n        raise ValueError(\n\n    ValueError: Input 0 of layer ""sequential"" is incompatible with the layer: expected shape=(None, 50, 22), found shape=(None, 32, 22)\n'}}, '1h': {'p_last': 1.0, 'weight': 0.5520898081663274, 'auc': 0.5520898081663274, 'best_side': 'long', 'debug': {'mode': 'sgd_only', 'p_sgd_mean': 1.0, 'p_lstm_mean': 0.5, 'p_hybrid_mean': 1.0, 'best_auc': 0.5520898081663274, 'best_side': 'long', 'use_lstm_hybrid': True, 'lstm_used': False, 'error': 'in user code:\n\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2440, in predict_function  *\n        return step_function(self, iterator)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2425, in step_function  **\n        outputs = model.distribute_strategy.run(run_step, args=(data,))\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2413, in run_step  **\n        outputs = model.predict_step(data)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2381, in predict_step\n        return self(x, training=False)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/utils/traceback_utils.py"", line 70, in error_handler\n        raise e.with_traceback(filtered_tb) from None\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/input_spec.py"", line 298, in assert_input_compatibility\n        raise ValueError(\n\n    ValueError: Input 0 of layer ""sequential"" is incompatible with the layer: expected shape=(None, 50, 22), found shape=(None, 32, 22)\n'}}}, 'intervals_used': ['1m', '5m', '15m', '1h'], 'weights_raw': [0.3, 0.3, 0.3, 0.5520898081663274], 'weights_norm': [0.20659879183287883, 0.20659879183287883, 0.20659879183287883, 0.3802036245013636], 'n_used': 4, 'ensemble_p': 0.9435428678049995}, 'whale_dir': 'long', 'whale_score': 1.0, 'whale_on': True, 'whale_alignment': 'aligned', 'whale_thr': 0.5, 'model_confidence_factor': 0.9435428678049995, 'atr': 452.67000000000036}}",2025-12-14T15:45:33.584258,92686.36,-0.7636339063939884,SL_HIT,BTCUSDT,5m,279,279,long,92686.36,0.9435428739621232,0.7267306089401245,1.0,0.7267306089401245,1.0,1.0,none,0.0,False,no_whale,0.5,0.9435428739621232,529.5107142857129
BTCUSDT,long,0.0005242256988952105,92686.36,48.58857184905308,5m,2025-12-14T15:45:33.585001,91892.09392857143,94274.89214285713,0.01,529.5107142857129,92920.04,92686.36,"{'probs': {'p_used': 0.9435428739621232, 'p_single': 0.7267306089401245}, 'extra': {'mtf_debug': {'per_interval': {'1m': {'p_last': 1.0, 'weight': 0.3, 'auc': 0.49900912892628313, 'best_side': 'short', 'debug': {'mode': 'sgd_only', 'p_sgd_mean': 1.0, 'p_lstm_mean': 0.5, 'p_hybrid_mean': 1.0, 'best_auc': 0.49900912892628313, 'best_side': 'short', 'use_lstm_hybrid': True, 'lstm_used': False, 'error': 'in user code:\n\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2440, in predict_function  *\n        return step_function(self, iterator)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2425, in step_function  **\n        outputs = model.distribute_strategy.run(run_step, args=(data,))\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2413, in run_step  **\n        outputs = model.predict_step(data)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2381, in predict_step\n        return self(x, training=False)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/utils/traceback_utils.py"", line 70, in error_handler\n        raise e.with_traceback(filtered_tb) from None\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/input_spec.py"", line 298, in assert_input_compatibility\n        raise ValueError(\n\n    ValueError: Input 0 of layer ""sequential"" is incompatible with the layer: expected shape=(None, 50, 22), found shape=(None, 32, 22)\n'}}, '5m': {'p_last': 0.7267306089401245, 'weight': 0.3, 'auc': 0.5136681486331411, 'best_side': 'long', 'debug': {'mode': 'lstm+sgd', 'p_sgd_mean': 1.0, 'p_lstm_mean': 0.5445509552955627, 'p_hybrid_mean': 0.7267305807343553, 'best_auc': 0.5136681486331411, 'best_side': 'long', 'use_lstm_hybrid': True, 'lstm_used': True, 'p_long_mean': 0.9897623658180237, 'p_short_mean': 0.09933960437774658}}, '15m': {'p_last': 1.0, 'weight': 0.3, 'auc': 0.5126647075075981, 'best_side': 'long', 'debug': {'mode': 'sgd_only', 'p_sgd_mean': 1.0, 'p_lstm_mean': 0.5, 'p_hybrid_mean': 1.0, 'best_auc': 0.5126647075075981, 'best_side': 'long', 'use_lstm_hybrid': True, 'lstm_used': False, 'error': 'in user code:\n\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2440, in predict_function  *\n        return step_function(self, iterator)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2425, in step_function  **\n        outputs = model.distribute_strategy.run(run_step, args=(data,))\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2413, in run_step  **\n        outputs = model.predict_step(data)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2381, in predict_step\n        return self(x, training=False)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/utils/traceback_utils.py"", line 70, in error_handler\n        raise e.with_traceback(filtered_tb) from None\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/input_spec.py"", line 298, in assert_input_compatibility\n        raise ValueError(\n\n    ValueError: Input 0 of layer ""sequential"" is incompatible with the layer: expected shape=(None, 50, 22), found shape=(None, 32, 22)\n'}}, '1h': {'p_last': 1.0, 'weight': 0.5520898081663274, 'auc': 0.5520898081663274, 'best_side': 'long', 'debug': {'mode': 'sgd_only', 'p_sgd_mean': 1.0, 'p_lstm_mean': 0.5, 'p_hybrid_mean': 1.0, 'best_auc': 0.5520898081663274, 'best_side': 'long', 'use_lstm_hybrid': True, 'lstm_used': False, 'error': 'in user code:\n\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2440, in predict_function  *\n        return step_function(self, iterator)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2425, in step_function  **\n        outputs = model.distribute_strategy.run(run_step, args=(data,))\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2413, in run_step  **\n        outputs = model.predict_step(data)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2381, in predict_step\n        return self(x, training=False)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/utils/traceback_utils.py"", line 70, in error_handler\n        raise e.with_traceback(filtered_tb) from None\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/input_spec.py"", line 298, in assert_input_compatibility\n        raise ValueError(\n\n    ValueError: Input 0 of layer ""sequential"" is incompatible with the layer: expected shape=(None, 50, 22), found shape=(None, 32, 22)\n'}}}, 'intervals_used': ['1m', '5m', '15m', '1h'], 'weights_raw': [0.3, 0.3, 0.3, 0.5520898081663274], 'weights_norm': [0.20659879183287883, 0.20659879183287883, 0.20659879183287883, 0.3802036245013636], 'n_used': 4, 'ensemble_p': 0.9435428739621232}, 'whale_dir': 'none', 'whale_score': 0.0, 'whale_on': False, 'whale_alignment': 'no_whale', 'whale_thr': 0.5, 'model_confidence_factor': 0.9435428739621232, 'atr': 529.5107142857129}}",2025-12-14T15:46:31.152494,91890.79,-0.4170582392700663,SL_HIT,BTCUSDT,5m,294,294,long,91890.79,0.9435428739621232,0.7267306089401245,1.0,0.7267306089401245,1.0,1.0,none,0.0,False,no_whale,0.5,0.9435428739621232,367.01642857142934
BTCUSDT,long,0.0005287643282754788,91890.79,48.58857184905308,5m,2025-12-14T15:46:31.153161,91340.26535714285,92991.83928571428,0.01,367.01642857142934,92953.72,91890.79,"{'probs': {'p_used': 0.9435428739621232, 'p_single': 0.7267306089401245}, 'extra': {'mtf_debug': {'per_interval': {'1m': {'p_last': 1.0, 'weight': 0.3, 'auc': 0.49900912892628313, 'best_side': 'short', 'debug': {'mode': 'sgd_only', 'p_sgd_mean': 1.0, 'p_lstm_mean': 0.5, 'p_hybrid_mean': 1.0, 'best_auc': 0.49900912892628313, 'best_side': 'short', 'use_lstm_hybrid': True, 'lstm_used': False, 'error': 'in user code:\n\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2440, in predict_function  *\n        return step_function(self, iterator)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2425, in step_function  **\n        outputs = model.distribute_strategy.run(run_step, args=(data,))\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2413, in run_step  **\n        outputs = model.predict_step(data)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2381, in predict_step\n        return self(x, training=False)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/utils/traceback_utils.py"", line 70, in error_handler\n        raise e.with_traceback(filtered_tb) from None\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/input_spec.py"", line 298, in assert_input_compatibility\n        raise ValueError(\n\n    ValueError: Input 0 of layer ""sequential"" is incompatible with the layer: expected shape=(None, 50, 22), found shape=(None, 32, 22)\n'}}, '5m': {'p_last': 0.7267306089401245, 'weight': 0.3, 'auc': 0.5136681486331411, 'best_side': 'long', 'debug': {'mode': 'lstm+sgd', 'p_sgd_mean': 1.0, 'p_lstm_mean': 0.5445510149002075, 'p_hybrid_mean': 0.726730580956249, 'best_auc': 0.5136681486331411, 'best_side': 'long', 'use_lstm_hybrid': True, 'lstm_used': True, 'p_long_mean': 0.9897623658180237, 'p_short_mean': 0.09933960437774658}}, '15m': {'p_last': 1.0, 'weight': 0.3, 'auc': 0.5126647075075981, 'best_side': 'long', 'debug': {'mode': 'sgd_only', 'p_sgd_mean': 1.0, 'p_lstm_mean': 0.5, 'p_hybrid_mean': 1.0, 'best_auc': 0.5126647075075981, 'best_side': 'long', 'use_lstm_hybrid': True, 'lstm_used': False, 'error': 'in user code:\n\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2440, in predict_function  *\n        return step_function(self, iterator)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2425, in step_function  **\n        outputs = model.distribute_strategy.run(run_step, args=(data,))\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2413, in run_step  **\n        outputs = model.predict_step(data)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2381, in predict_step\n        return self(x, training=False)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/utils/traceback_utils.py"", line 70, in error_handler\n        raise e.with_traceback(filtered_tb) from None\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/input_spec.py"", line 298, in assert_input_compatibility\n        raise ValueError(\n\n    ValueError: Input 0 of layer ""sequential"" is incompatible with the layer: expected shape=(None, 50, 22), found shape=(None, 32, 22)\n'}}, '1h': {'p_last': 1.0, 'weight': 0.5520898081663274, 'auc': 0.5520898081663274, 'best_side': 'long', 'debug': {'mode': 'sgd_only', 'p_sgd_mean': 1.0, 'p_lstm_mean': 0.5, 'p_hybrid_mean': 1.0, 'best_auc': 0.5520898081663274, 'best_side': 'long', 'use_lstm_hybrid': True, 'lstm_used': False, 'error': 'in user code:\n\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2440, in predict_function  *\n        return step_function(self, iterator)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2425, in step_function  **\n        outputs = model.distribute_strategy.run(run_step, args=(data,))\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2413, in run_step  **\n        outputs = model.predict_step(data)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2381, in predict_step\n        return self(x, training=False)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/utils/traceback_utils.py"", line 70, in error_handler\n        raise e.with_traceback(filtered_tb) from None\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/input_spec.py"", line 298, in assert_input_compatibility\n        raise ValueError(\n\n    ValueError: Input 0 of layer ""sequential"" is incompatible with the layer: expected shape=(None, 50, 22), found shape=(None, 32, 22)\n'}}}, 'intervals_used': ['1m', '5m', '15m', '1h'], 'weights_raw': [0.3, 0.3, 0.3, 0.5520898081663274], 'weights_norm': [0.20659879183287883, 0.20659879183287883, 0.20659879183287883, 0.3802036245013636], 'n_used': 4, 'ensemble_p': 0.9435428739621232}, 'whale_dir': 'none', 'whale_score': 0.0, 'whale_on': False, 'whale_alignment': 'no_whale', 'whale_thr': 0.5, 'model_confidence_factor': 0.9435428739621232, 'atr': 367.01642857142934}}",2025-12-14T15:47:55.126740,93006.69,0.5900481139226114,TP_HIT,BTCUSDT,5m,315,315,long,93006.69,0.9435428678049995,0.7267305791378021,1.0,0.7267305791378021,1.0,1.0,long,1.0,True,aligned,0.5,0.9435428678049995,249.00000000000105
BTCUSDT,long,0.0009403563233056136,93006.69,87.45942905122497,5m,2025-12-14T15:47:55.127436,92633.19,93753.69,0.01,249.00000000000105,93421.05,93006.69,"{'probs': {'p_used': 0.9435428678049995, 'p_single': 0.7267305791378021}, 'extra': {'mtf_debug': {'per_interval': {'1m': {'p_last': 1.0, 'weight': 0.3, 'auc': 0.49900912892628313, 'best_side': 'short', 'debug': {'mode': 'sgd_only', 'p_sgd_mean': 1.0, 'p_lstm_mean': 0.5, 'p_hybrid_mean': 1.0, 'best_auc': 0.49900912892628313, 'best_side': 'short', 'use_lstm_hybrid': True, 'lstm_used': False, 'error': 'in user code:\n\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2440, in predict_function  *\n        return step_function(self, iterator)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2425, in step_function  **\n        outputs = model.distribute_strategy.run(run_step, args=(data,))\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2413, in run_step  **\n        outputs = model.predict_step(data)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2381, in predict_step\n        return self(x, training=False)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/utils/traceback_utils.py"", line 70, in error_handler\n        raise e.with_traceback(filtered_tb) from None\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/input_spec.py"", line 298, in assert_input_compatibility\n        raise ValueError(\n\n    ValueError: Input 0 of layer ""sequential"" is incompatible with the layer: expected shape=(None, 50, 22), found shape=(None, 32, 22)\n'}}, '5m': {'p_last': 0.7267305791378021, 'weight': 0.3, 'auc': 0.5136681486331411, 'best_side': 'long', 'debug': {'mode': 'lstm+sgd', 'p_sgd_mean': 1.0, 'p_lstm_mean': 0.5445509552955627, 'p_hybrid_mean': 0.7267305806467805, 'best_auc': 0.5136681486331411, 'best_side': 'long', 'use_lstm_hybrid': True, 'lstm_used': True, 'p_long_mean': 0.9897623658180237, 'p_short_mean': 0.09933959692716599}}, '15m': {'p_last': 1.0, 'weight': 0.3, 'auc': 0.5126647075075981, 'best_side': 'long', 'debug': {'mode': 'sgd_only', 'p_sgd_mean': 1.0, 'p_lstm_mean': 0.5, 'p_hybrid_mean': 1.0, 'best_auc': 0.5126647075075981, 'best_side': 'long', 'use_lstm_hybrid': True, 'lstm_used': False, 'error': 'in user code:\n\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2440, in predict_function  *\n        return step_function(self, iterator)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2425, in step_function  **\n        outputs = model.distribute_strategy.run(run_step, args=(data,))\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2413, in run_step  **\n        outputs = model.predict_step(data)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2381, in predict_step\n        return self(x, training=False)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/utils/traceback_utils.py"", line 70, in error_handler\n        raise e.with_traceback(filtered_tb) from None\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/input_spec.py"", line 298, in assert_input_compatibility\n        raise ValueError(\n\n    ValueError: Input 0 of layer ""sequential"" is incompatible with the layer: expected shape=(None, 50, 22), found shape=(None, 32, 22)\n'}}, '1h': {'p_last': 1.0, 'weight': 0.5520898081663274, 'auc': 0.5520898081663274, 'best_side': 'long', 'debug': {'mode': 'sgd_only', 'p_sgd_mean': 1.0, 'p_lstm_mean': 0.5, 'p_hybrid_mean': 1.0, 'best_auc': 0.5520898081663274, 'best_side': 'long', 'use_lstm_hybrid': True, 'lstm_used': False, 'error': 'in user code:\n\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2440, in predict_function  *\n        return step_function(self, iterator)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2425, in step_function  **\n        outputs = model.distribute_strategy.run(run_step, args=(data,))\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2413, in run_step  **\n        outputs = model.predict_step(data)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2381, in predict_step\n        return self(x, training=False)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/utils/traceback_utils.py"", line 70, in error_handler\n        raise e.with_traceback(filtered_tb) from None\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/input_spec.py"", line 298, in assert_input_compatibility\n        raise ValueError(\n\n    ValueError: Input 0 of layer ""sequential"" is incompatible with the layer: expected shape=(None, 50, 22), found shape=(None, 32, 22)\n'}}}, 'intervals_used': ['1m', '5m', '15m', '1h'], 'weights_raw': [0.3, 0.3, 0.3, 0.5520898081663274], 'weights_norm': [0.20659879183287883, 0.20659879183287883, 0.20659879183287883, 0.3802036245013636], 'n_used': 4, 'ensemble_p': 0.9435428678049995}, 'whale_dir': 'long', 'whale_score': 1.0, 'whale_on': True, 'whale_alignment': 'aligned', 'whale_thr': 0.5, 'model_confidence_factor': 0.9435428678049995, 'atr': 249.00000000000105}}",2025-12-14T15:48:45.873343,92529.68,-0.4485593697800195,SL_HIT,BTCUSDT,5m,327,327,long,92529.68,0.9435428678049995,0.7267305791378021,1.0,0.7267305791378021,1.0,1.0,long,1.0,True,aligned,0.5,0.9435428678049995,241.35500000000215
BTCUSDT,long,0.0009452040583218809,92529.68,87.45942905122497,5m,2025-12-14T15:48:45.874450,92167.64749999999,93253.745,0.01,241.35500000000215,93220.84,92529.68,"{'probs': {'p_used': 0.9435428678049995, 'p_single': 0.7267305791378021}, 'extra': {'mtf_debug': {'per_interval': {'1m': {'p_last': 1.0, 'weight': 0.3, 'auc': 0.49900912892628313, 'best_side': 'short', 'debug': {'mode': 'sgd_only', 'p_sgd_mean': 1.0, 'p_lstm_mean': 0.5, 'p_hybrid_mean': 1.0, 'best_auc': 0.49900912892628313, 'best_side': 'short', 'use_lstm_hybrid': True, 'lstm_used': False, 'error': 'in user code:\n\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2440, in predict_function  *\n        return step_function(self, iterator)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2425, in step_function  **\n        outputs = model.distribute_strategy.run(run_step, args=(data,))\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2413, in run_step  **\n        outputs = model.predict_step(data)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2381, in predict_step\n        return self(x, training=False)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/utils/traceback_utils.py"", line 70, in error_handler\n        raise e.with_traceback(filtered_tb) from None\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/input_spec.py"", line 298, in assert_input_compatibility\n        raise ValueError(\n\n    ValueError: Input 0 of layer ""sequential"" is incompatible with the layer: expected shape=(None, 50, 22), found shape=(None, 32, 22)\n'}}, '5m': {'p_last': 0.7267305791378021, 'weight': 0.3, 'auc': 0.5136681486331411, 'best_side': 'long', 'debug': {'mode': 'lstm+sgd', 'p_sgd_mean': 1.0, 'p_lstm_mean': 0.544550895690918, 'p_hybrid_mean': 0.7267305807732956, 'best_auc': 0.5136681486331411, 'best_side': 'long', 'use_lstm_hybrid': True, 'lstm_used': True, 'p_long_mean': 0.9897624254226685, 'p_short_mean': 0.09933959692716599}}, '15m': {'p_last': 1.0, 'weight': 0.3, 'auc': 0.5126647075075981, 'best_side': 'long', 'debug': {'mode': 'sgd_only', 'p_sgd_mean': 1.0, 'p_lstm_mean': 0.5, 'p_hybrid_mean': 1.0, 'best_auc': 0.5126647075075981, 'best_side': 'long', 'use_lstm_hybrid': True, 'lstm_used': False, 'error': 'in user code:\n\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2440, in predict_function  *\n        return step_function(self, iterator)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2425, in step_function  **\n        outputs = model.distribute_strategy.run(run_step, args=(data,))\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2413, in run_step  **\n        outputs = model.predict_step(data)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2381, in predict_step\n        return self(x, training=False)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/utils/traceback_utils.py"", line 70, in error_handler\n        raise e.with_traceback(filtered_tb) from None\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/input_spec.py"", line 298, in assert_input_compatibility\n        raise ValueError(\n\n    ValueError: Input 0 of layer ""sequential"" is incompatible with the layer: expected shape=(None, 50, 22), found shape=(None, 32, 22)\n'}}, '1h': {'p_last': 1.0, 'weight': 0.5520898081663274, 'auc': 0.5520898081663274, 'best_side': 'long', 'debug': {'mode': 'sgd_only', 'p_sgd_mean': 1.0, 'p_lstm_mean': 0.5, 'p_hybrid_mean': 1.0, 'best_auc': 0.5520898081663274, 'best_side': 'long', 'use_lstm_hybrid': True, 'lstm_used': False, 'error': 'in user code:\n\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2440, in predict_function  *\n        return step_function(self, iterator)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2425, in step_function  **\n        outputs = model.distribute_strategy.run(run_step, args=(data,))\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2413, in run_step  **\n        outputs = model.predict_step(data)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2381, in predict_step\n        return self(x, training=False)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/utils/traceback_utils.py"", line 70, in error_handler\n        raise e.with_traceback(filtered_tb) from None\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/input_spec.py"", line 298, in assert_input_compatibility\n        raise ValueError(\n\n    ValueError: Input 0 of layer ""sequential"" is incompatible with the layer: expected shape=(None, 50, 22), found shape=(None, 32, 22)\n'}}}, 'intervals_used': ['1m', '5m', '15m', '1h'], 'weights_raw': [0.3, 0.3, 0.3, 0.5520898081663274], 'weights_norm': [0.20659879183287883, 0.20659879183287883, 0.20659879183287883, 0.3802036245013636], 'n_used': 4, 'ensemble_p': 0.9435428678049995}, 'whale_dir': 'long', 'whale_score': 1.0, 'whale_on': True, 'whale_alignment': 'aligned', 'whale_thr': 0.5, 'model_confidence_factor': 0.9435428678049995, 'atr': 241.35500000000215}}",2025-12-14T15:50:56.914260,93276.2,0.7056137336184544,TP_HIT,BTCUSDT,5m,358,358,long,93276.2,0.9435428739621232,0.7267306089401245,1.0,0.7267306089401245,1.0,1.0,short,0.9001274668301188,True,opposed,0.5,0.28306286218863697,168.59785714285889
BTCUSDT,long,0.00010720848405059383,93276.2,10.0,5m,2025-12-14T15:50:56.914907,93023.30321428571,93781.99357142857,0.01,168.59785714285889,93781.01,93276.2,"{'probs': {'p_used': 0.9435428739621232, 'p_single': 0.7267306089401245}, 'extra': {'mtf_debug': {'per_interval': {'1m': {'p_last': 1.0, 'weight': 0.3, 'auc': 0.49900912892628313, 'best_side': 'short', 'debug': {'mode': 'sgd_only', 'p_sgd_mean': 1.0, 'p_lstm_mean': 0.5, 'p_hybrid_mean': 1.0, 'best_auc': 0.49900912892628313, 'best_side': 'short', 'use_lstm_hybrid': True, 'lstm_used': False, 'error': 'in user code:\n\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2440, in predict_function  *\n        return step_function(self, iterator)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2425, in step_function  **\n        outputs = model.distribute_strategy.run(run_step, args=(data,))\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2413, in run_step  **\n        outputs = model.predict_step(data)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2381, in predict_step\n        return self(x, training=False)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/utils/traceback_utils.py"", line 70, in error_handler\n        raise e.with_traceback(filtered_tb) from None\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/input_spec.py"", line 298, in assert_input_compatibility\n        raise ValueError(\n\n    ValueError: Input 0 of layer ""sequential"" is incompatible with the layer: expected shape=(None, 50, 22), found shape=(None, 32, 22)\n'}}, '5m': {'p_last': 0.7267306089401245, 'weight': 0.3, 'auc': 0.5136681486331411, 'best_side': 'long', 'debug': {'mode': 'lstm+sgd', 'p_sgd_mean': 1.0, 'p_lstm_mean': 0.5445510149002075, 'p_hybrid_mean': 0.7267305809641287, 'best_auc': 0.5136681486331411, 'best_side': 'long', 'use_lstm_hybrid': True, 'lstm_used': True, 'p_long_mean': 0.9897624850273132, 'p_short_mean': 0.09933960437774658}}, '15m': {'p_last': 1.0, 'weight': 0.3, 'auc': 0.5126647075075981, 'best_side': 'long', 'debug': {'mode': 'sgd_only', 'p_sgd_mean': 1.0, 'p_lstm_mean': 0.5, 'p_hybrid_mean': 1.0, 'best_auc': 0.5126647075075981, 'best_side': 'long', 'use_lstm_hybrid': True, 'lstm_used': False, 'error': 'in user code:\n\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2440, in predict_function  *\n        return step_function(self, iterator)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2425, in step_function  **\n        outputs = model.distribute_strategy.run(run_step, args=(data,))\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2413, in run_step  **\n        outputs = model.predict_step(data)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2381, in predict_step\n        return self(x, training=False)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/utils/traceback_utils.py"", line 70, in error_handler\n        raise e.with_traceback(filtered_tb) from None\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/input_spec.py"", line 298, in assert_input_compatibility\n        raise ValueError(\n\n    ValueError: Input 0 of layer ""sequential"" is incompatible with the layer: expected shape=(None, 50, 22), found shape=(None, 32, 22)\n'}}, '1h': {'p_last': 1.0, 'weight': 0.5520898081663274, 'auc': 0.5520898081663274, 'best_side': 'long', 'debug': {'mode': 'sgd_only', 'p_sgd_mean': 1.0, 'p_lstm_mean': 0.5, 'p_hybrid_mean': 1.0, 'best_auc': 0.5520898081663274, 'best_side': 'long', 'use_lstm_hybrid': True, 'lstm_used': False, 'error': 'in user code:\n\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2440, in predict_function  *\n        return step_function(self, iterator)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2425, in step_function  **\n        outputs = model.distribute_strategy.run(run_step, args=(data,))\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2413, in run_step  **\n        outputs = model.predict_step(data)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2381, in predict_step\n        return self(x, training=False)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/utils/traceback_utils.py"", line 70, in error_handler\n        raise e.with_traceback(filtered_tb) from None\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/input_spec.py"", line 298, in assert_input_compatibility\n        raise ValueError(\n\n    ValueError: Input 0 of layer ""sequential"" is incompatible with the layer: expected shape=(None, 50, 22), found shape=(None, 32, 22)\n'}}}, 'intervals_used': ['1m', '5m', '15m', '1h'], 'weights_raw': [0.3, 0.3, 0.3, 0.5520898081663274], 'weights_norm': [0.20659879183287883, 0.20659879183287883, 0.20659879183287883, 0.3802036245013636], 'n_used': 4, 'ensemble_p': 0.9435428739621232}, 'whale_dir': 'short', 'whale_score': 0.9001274668301188, 'whale_on': True, 'whale_alignment': 'opposed', 'whale_thr': 0.5, 'model_confidence_factor': 0.28306286218863697, 'atr': 168.59785714285889}}",2025-12-14T15:52:28.417983,93828.0,0.05915764149911799,TP_HIT,BTCUSDT,5m,377,377,long,93828.0,0.9435428678049995,0.7267305791378021,1.0,0.7267305791378021,1.0,1.0,none,0.0,False,no_whale,0.5,0.9435428678049995,258.78428571428645
BTCUSDT,long,0.0005178472491700238,93828.0,48.58857169512499,5m,2025-12-14T15:52:28.418611,93439.82357142857,94604.35285714286,0.01,258.78428571428645,94033.69,93828.0,"{'probs': {'p_used': 0.9435428678049995, 'p_single': 0.7267305791378021}, 'extra': {'mtf_debug': {'per_interval': {'1m': {'p_last': 1.0, 'weight': 0.3, 'auc': 0.49900912892628313, 'best_side': 'short', 'debug': {'mode': 'sgd_only', 'p_sgd_mean': 1.0, 'p_lstm_mean': 0.5, 'p_hybrid_mean': 1.0, 'best_auc': 0.49900912892628313, 'best_side': 'short', 'use_lstm_hybrid': True, 'lstm_used': False, 'error': 'in user code:\n\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2440, in predict_function  *\n        return step_function(self, iterator)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2425, in step_function  **\n        outputs = model.distribute_strategy.run(run_step, args=(data,))\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2413, in run_step  **\n        outputs = model.predict_step(data)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2381, in predict_step\n        return self(x, training=False)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/utils/traceback_utils.py"", line 70, in error_handler\n        raise e.with_traceback(filtered_tb) from None\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/input_spec.py"", line 298, in assert_input_compatibility\n        raise ValueError(\n\n    ValueError: Input 0 of layer ""sequential"" is incompatible with the layer: expected shape=(None, 50, 22), found shape=(None, 32, 22)\n'}}, '5m': {'p_last': 0.7267305791378021, 'weight': 0.3, 'auc': 0.5136681486331411, 'best_side': 'long', 'debug': {'mode': 'lstm+sgd', 'p_sgd_mean': 1.0, 'p_lstm_mean': 0.5445509552955627, 'p_hybrid_mean': 0.7267305807146447, 'best_auc': 0.5136681486331411, 'best_side': 'long', 'use_lstm_hybrid': True, 'lstm_used': True, 'p_long_mean': 0.9897624254226685, 'p_short_mean': 0.09933959692716599}}, '15m': {'p_last': 1.0, 'weight': 0.3, 'auc': 0.5126647075075981, 'best_side': 'long', 'debug': {'mode': 'sgd_only', 'p_sgd_mean': 1.0, 'p_lstm_mean': 0.5, 'p_hybrid_mean': 1.0, 'best_auc': 0.5126647075075981, 'best_side': 'long', 'use_lstm_hybrid': True, 'lstm_used': False, 'error': 'in user code:\n\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2440, in predict_function  *\n        return step_function(self, iterator)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2425, in step_function  **\n        outputs = model.distribute_strategy.run(run_step, args=(data,))\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2413, in run_step  **\n        outputs = model.predict_step(data)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2381, in predict_step\n        return self(x, training=False)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/utils/traceback_utils.py"", line 70, in error_handler\n        raise e.with_traceback(filtered_tb) from None\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/input_spec.py"", line 298, in assert_input_compatibility\n        raise ValueError(\n\n    ValueError: Input 0 of layer ""sequential"" is incompatible with the layer: expected shape=(None, 50, 22), found shape=(None, 32, 22)\n'}}, '1h': {'p_last': 1.0, 'weight': 0.5520898081663274, 'auc': 0.5520898081663274, 'best_side': 'long', 'debug': {'mode': 'sgd_only', 'p_sgd_mean': 1.0, 'p_lstm_mean': 0.5, 'p_hybrid_mean': 1.0, 'best_auc': 0.5520898081663274, 'best_side': 'long', 'use_lstm_hybrid': True, 'lstm_used': False, 'error': 'in user code:\n\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2440, in predict_function  *\n        return step_function(self, iterator)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2425, in step_function  **\n        outputs = model.distribute_strategy.run(run_step, args=(data,))\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2413, in run_step  **\n        outputs = model.predict_step(data)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2381, in predict_step\n        return self(x, training=False)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/utils/traceback_utils.py"", line 70, in error_handler\n        raise e.with_traceback(filtered_tb) from None\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/input_spec.py"", line 298, in assert_input_compatibility\n        raise ValueError(\n\n    ValueError: Input 0 of layer ""sequential"" is incompatible with the layer: expected shape=(None, 50, 22), found shape=(None, 32, 22)\n'}}}, 'intervals_used': ['1m', '5m', '15m', '1h'], 'weights_raw': [0.3, 0.3, 0.3, 0.5520898081663274], 'weights_norm': [0.20659879183287883, 0.20659879183287883, 0.20659879183287883, 0.3802036245013636], 'n_used': 4, 'ensemble_p': 0.9435428678049995}, 'whale_dir': 'none', 'whale_score': 0.0, 'whale_on': False, 'whale_alignment': 'no_whale', 'whale_thr': 0.5, 'model_confidence_factor': 0.9435428678049995, 'atr': 258.78428571428645}}",2025-12-14T15:53:19.599662,93429.95,-0.2061290975321295,SL_HIT,BTCUSDT,5m,388,388,long,93429.95,0.9435428678049995,0.7267305791378021,1.0,0.7267305791378021,1.0,1.0,none,0.0,False,no_whale,0.5,0.9435428678049995,196.1907142857131
BTCUSDT,long,0.000520053491360372,93429.95,48.58857169512499,5m,2025-12-14T15:53:19.600277,93135.66392857143,94018.52214285714,0.01,196.1907142857131,93429.95,93429.95,"{'probs': {'p_used': 0.9435428678049995, 'p_single': 0.7267305791378021}, 'extra': {'mtf_debug': {'per_interval': {'1m': {'p_last': 1.0, 'weight': 0.3, 'auc': 0.49900912892628313, 'best_side': 'short', 'debug': {'mode': 'sgd_only', 'p_sgd_mean': 1.0, 'p_lstm_mean': 0.5, 'p_hybrid_mean': 1.0, 'best_auc': 0.49900912892628313, 'best_side': 'short', 'use_lstm_hybrid': True, 'lstm_used': False, 'error': 'in user code:\n\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2440, in predict_function  *\n        return step_function(self, iterator)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2425, in step_function  **\n        outputs = model.distribute_strategy.run(run_step, args=(data,))\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2413, in run_step  **\n        outputs = model.predict_step(data)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2381, in predict_step\n        return self(x, training=False)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/utils/traceback_utils.py"", line 70, in error_handler\n        raise e.with_traceback(filtered_tb) from None\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/input_spec.py"", line 298, in assert_input_compatibility\n        raise ValueError(\n\n    ValueError: Input 0 of layer ""sequential"" is incompatible with the layer: expected shape=(None, 50, 22), found shape=(None, 32, 22)\n'}}, '5m': {'p_last': 0.7267305791378021, 'weight': 0.3, 'auc': 0.5136681486331411, 'best_side': 'long', 'debug': {'mode': 'lstm+sgd', 'p_sgd_mean': 1.0, 'p_lstm_mean': 0.5445509552955627, 'p_hybrid_mean': 0.7267305808232809, 'best_auc': 0.5136681486331411, 'best_side': 'long', 'use_lstm_hybrid': True, 'lstm_used': True, 'p_long_mean': 0.9897623658180237, 'p_short_mean': 0.09933959692716599}}, '15m': {'p_last': 1.0, 'weight': 0.3, 'auc': 0.5126647075075981, 'best_side': 'long', 'debug': {'mode': 'sgd_only', 'p_sgd_mean': 1.0, 'p_lstm_mean': 0.5, 'p_hybrid_mean': 1.0, 'best_auc': 0.5126647075075981, 'best_side': 'long', 'use_lstm_hybrid': True, 'lstm_used': False, 'error': 'in user code:\n\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2440, in predict_function  *\n        return step_function(self, iterator)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2425, in step_function  **\n        outputs = model.distribute_strategy.run(run_step, args=(data,))\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2413, in run_step  **\n        outputs = model.predict_step(data)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2381, in predict_step\n        return self(x, training=False)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/utils/traceback_utils.py"", line 70, in error_handler\n        raise e.with_traceback(filtered_tb) from None\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/input_spec.py"", line 298, in assert_input_compatibility\n        raise ValueError(\n\n    ValueError: Input 0 of layer ""sequential"" is incompatible with the layer: expected shape=(None, 50, 22), found shape=(None, 32, 22)\n'}}, '1h': {'p_last': 1.0, 'weight': 0.5520898081663274, 'auc': 0.5520898081663274, 'best_side': 'long', 'debug': {'mode': 'sgd_only', 'p_sgd_mean': 1.0, 'p_lstm_mean': 0.5, 'p_hybrid_mean': 1.0, 'best_auc': 0.5520898081663274, 'best_side': 'long', 'use_lstm_hybrid': True, 'lstm_used': False, 'error': 'in user code:\n\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2440, in predict_function  *\n        return step_function(self, iterator)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2425, in step_function  **\n        outputs = model.distribute_strategy.run(run_step, args=(data,))\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2413, in run_step  **\n        outputs = model.predict_step(data)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2381, in predict_step\n        return self(x, training=False)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/utils/traceback_utils.py"", line 70, in error_handler\n        raise e.with_traceback(filtered_tb) from None\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/input_spec.py"", line 298, in assert_input_compatibility\n        raise ValueError(\n\n    ValueError: Input 0 of layer ""sequential"" is incompatible with the layer: expected shape=(None, 50, 22), found shape=(None, 32, 22)\n'}}}, 'intervals_used': ['1m', '5m', '15m', '1h'], 'weights_raw': [0.3, 0.3, 0.3, 0.5520898081663274], 'weights_norm': [0.20659879183287883, 0.20659879183287883, 0.20659879183287883, 0.3802036245013636], 'n_used': 4, 'ensemble_p': 0.9435428678049995}, 'whale_dir': 'none', 'whale_score': 0.0, 'whale_on': False, 'whale_alignment': 'no_whale', 'whale_thr': 0.5, 'model_confidence_factor': 0.9435428678049995, 'atr': 196.1907142857131}}",2025-12-14T15:53:34.327481,92952.99,-0.2480447132392388,SL_HIT,BTCUSDT,5m,391,391,long,92952.99,0.9435428678049995,0.7267305791378021,1.0,0.7267305791378021,1.0,1.0,short,0.5779730180187796,True,opposed,0.5,0.28306286034149986,180.08785714285582
BTCUSDT,long,0.0002653041539765816,92952.99,24.66081437154365,5m,2025-12-14T15:53:34.328225,92682.85821428572,93493.25357142858,0.01,180.08785714285582,93095.0,92952.99,"{'probs': {'p_used': 0.9435428678049995, 'p_single': 0.7267305791378021}, 'extra': {'mtf_debug': {'per_interval': {'1m': {'p_last': 1.0, 'weight': 0.3, 'auc': 0.49900912892628313, 'best_side': 'short', 'debug': {'mode': 'sgd_only', 'p_sgd_mean': 1.0, 'p_lstm_mean': 0.5, 'p_hybrid_mean': 1.0, 'best_auc': 0.49900912892628313, 'best_side': 'short', 'use_lstm_hybrid': True, 'lstm_used': False, 'error': 'in user code:\n\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2440, in predict_function  *\n        return step_function(self, iterator)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2425, in step_function  **\n        outputs = model.distribute_strategy.run(run_step, args=(data,))\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2413, in run_step  **\n        outputs = model.predict_step(data)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2381, in predict_step\n        return self(x, training=False)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/utils/traceback_utils.py"", line 70, in error_handler\n        raise e.with_traceback(filtered_tb) from None\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/input_spec.py"", line 298, in assert_input_compatibility\n        raise ValueError(\n\n    ValueError: Input 0 of layer ""sequential"" is incompatible with the layer: expected shape=(None, 50, 22), found shape=(None, 32, 22)\n'}}, '5m': {'p_last': 0.7267305791378021, 'weight': 0.3, 'auc': 0.5136681486331411, 'best_side': 'long', 'debug': {'mode': 'lstm+sgd', 'p_sgd_mean': 1.0, 'p_lstm_mean': 0.544550895690918, 'p_hybrid_mean': 0.7267305808103817, 'best_auc': 0.5136681486331411, 'best_side': 'long', 'use_lstm_hybrid': True, 'lstm_used': True, 'p_long_mean': 0.9897624254226685, 'p_short_mean': 0.09933959692716599}}, '15m': {'p_last': 1.0, 'weight': 0.3, 'auc': 0.5126647075075981, 'best_side': 'long', 'debug': {'mode': 'sgd_only', 'p_sgd_mean': 1.0, 'p_lstm_mean': 0.5, 'p_hybrid_mean': 1.0, 'best_auc': 0.5126647075075981, 'best_side': 'long', 'use_lstm_hybrid': True, 'lstm_used': False, 'error': 'in user code:\n\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2440, in predict_function  *\n        return step_function(self, iterator)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2425, in step_function  **\n        outputs = model.distribute_strategy.run(run_step, args=(data,))\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2413, in run_step  **\n        outputs = model.predict_step(data)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2381, in predict_step\n        return self(x, training=False)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/utils/traceback_utils.py"", line 70, in error_handler\n        raise e.with_traceback(filtered_tb) from None\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/input_spec.py"", line 298, in assert_input_compatibility\n        raise ValueError(\n\n    ValueError: Input 0 of layer ""sequential"" is incompatible with the layer: expected shape=(None, 50, 22), found shape=(None, 32, 22)\n'}}, '1h': {'p_last': 1.0, 'weight': 0.5520898081663274, 'auc': 0.5520898081663274, 'best_side': 'long', 'debug': {'mode': 'sgd_only', 'p_sgd_mean': 1.0, 'p_lstm_mean': 0.5, 'p_hybrid_mean': 1.0, 'best_auc': 0.5520898081663274, 'best_side': 'long', 'use_lstm_hybrid': True, 'lstm_used': False, 'error': 'in user code:\n\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2440, in predict_function  *\n        return step_function(self, iterator)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2425, in step_function  **\n        outputs = model.distribute_strategy.run(run_step, args=(data,))\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2413, in run_step  **\n        outputs = model.predict_step(data)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2381, in predict_step\n        return self(x, training=False)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/utils/traceback_utils.py"", line 70, in error_handler\n        raise e.with_traceback(filtered_tb) from None\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/input_spec.py"", line 298, in assert_input_compatibility\n        raise ValueError(\n\n    ValueError: Input 0 of layer ""sequential"" is incompatible with the layer: expected shape=(None, 50, 22), found shape=(None, 32, 22)\n'}}}, 'intervals_used': ['1m', '5m', '15m', '1h'], 'weights_raw': [0.3, 0.3, 0.3, 0.5520898081663274], 'weights_norm': [0.20659879183287883, 0.20659879183287883, 0.20659879183287883, 0.3802036245013636], 'n_used': 4, 'ensemble_p': 0.9435428678049995}, 'whale_dir': 'short', 'whale_score': 0.5779730180187796, 'whale_on': True, 'whale_alignment': 'opposed', 'whale_thr': 0.5, 'model_confidence_factor': 0.28306286034149986, 'atr': 180.08785714285582}}",2025-12-14T15:53:52.658459,92676.71,-0.07329823166064965,SL_HIT,BTCUSDT,5m,395,395,long,92676.71,0.9435428739621232,0.7267306089401245,1.0,0.7267306089401245,1.0,1.0,none,0.0,False,no_whale,0.5,0.9435428739621232,176.62928571428554
BTCUSDT,long,0.0005242802841086296,92676.71,48.58857184905308,5m,2025-12-14T15:53:52.660210,92411.76607142857,93206.59785714286,0.01,176.62928571428554,93054.86,92676.71,"{'probs': {'p_used': 0.9435428739621232, 'p_single': 0.7267306089401245}, 'extra': {'mtf_debug': {'per_interval': {'1m': {'p_last': 1.0, 'weight': 0.3, 'auc': 0.49900912892628313, 'best_side': 'short', 'debug': {'mode': 'sgd_only', 'p_sgd_mean': 1.0, 'p_lstm_mean': 0.5, 'p_hybrid_mean': 1.0, 'best_auc': 0.49900912892628313, 'best_side': 'short', 'use_lstm_hybrid': True, 'lstm_used': False, 'error': 'in user code:\n\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2440, in predict_function  *\n        return step_function(self, iterator)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2425, in step_function  **\n        outputs = model.distribute_strategy.run(run_step, args=(data,))\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2413, in run_step  **\n        outputs = model.predict_step(data)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2381, in predict_step\n        return self(x, training=False)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/utils/traceback_utils.py"", line 70, in error_handler\n        raise e.with_traceback(filtered_tb) from None\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/input_spec.py"", line 298, in assert_input_compatibility\n        raise ValueError(\n\n    ValueError: Input 0 of layer ""sequential"" is incompatible with the layer: expected shape=(None, 50, 22), found shape=(None, 32, 22)\n'}}, '5m': {'p_last': 0.7267306089401245, 'weight': 0.3, 'auc': 0.5136681486331411, 'best_side': 'long', 'debug': {'mode': 'lstm+sgd', 'p_sgd_mean': 1.0, 'p_lstm_mean': 0.5445509552955627, 'p_hybrid_mean': 0.7267305808687453, 'best_auc': 0.5136681486331411, 'best_side': 'long', 'use_lstm_hybrid': True, 'lstm_used': True, 'p_long_mean': 0.9897624254226685, 'p_short_mean': 0.09933959692716599}}, '15m': {'p_last': 1.0, 'weight': 0.3, 'auc': 0.5126647075075981, 'best_side': 'long', 'debug': {'mode': 'sgd_only', 'p_sgd_mean': 1.0, 'p_lstm_mean': 0.5, 'p_hybrid_mean': 1.0, 'best_auc': 0.5126647075075981, 'best_side': 'long', 'use_lstm_hybrid': True, 'lstm_used': False, 'error': 'in user code:\n\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2440, in predict_function  *\n        return step_function(self, iterator)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2425, in step_function  **\n        outputs = model.distribute_strategy.run(run_step, args=(data,))\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2413, in run_step  **\n        outputs = model.predict_step(data)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2381, in predict_step\n        return self(x, training=False)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/utils/traceback_utils.py"", line 70, in error_handler\n        raise e.with_traceback(filtered_tb) from None\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/input_spec.py"", line 298, in assert_input_compatibility\n        raise ValueError(\n\n    ValueError: Input 0 of layer ""sequential"" is incompatible with the layer: expected shape=(None, 50, 22), found shape=(None, 32, 22)\n'}}, '1h': {'p_last': 1.0, 'weight': 0.5520898081663274, 'auc': 0.5520898081663274, 'best_side': 'long', 'debug': {'mode': 'sgd_only', 'p_sgd_mean': 1.0, 'p_lstm_mean': 0.5, 'p_hybrid_mean': 1.0, 'best_auc': 0.5520898081663274, 'best_side': 'long', 'use_lstm_hybrid': True, 'lstm_used': False, 'error': 'in user code:\n\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2440, in predict_function  *\n        return step_function(self, iterator)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2425, in step_function  **\n        outputs = model.distribute_strategy.run(run_step, args=(data,))\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2413, in run_step  **\n        outputs = model.predict_step(data)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2381, in predict_step\n        return self(x, training=False)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/utils/traceback_utils.py"", line 70, in error_handler\n        raise e.with_traceback(filtered_tb) from None\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/input_spec.py"", line 298, in assert_input_compatibility\n        raise ValueError(\n\n    ValueError: Input 0 of layer ""sequential"" is incompatible with the layer: expected shape=(None, 50, 22), found shape=(None, 32, 22)\n'}}}, 'intervals_used': ['1m', '5m', '15m', '1h'], 'weights_raw': [0.3, 0.3, 0.3, 0.5520898081663274], 'weights_norm': [0.20659879183287883, 0.20659879183287883, 0.20659879183287883, 0.3802036245013636], 'n_used': 4, 'ensemble_p': 0.9435428739621232}, 'whale_dir': 'none', 'whale_score': 0.0, 'whale_on': False, 'whale_alignment': 'no_whale', 'whale_thr': 0.5, 'model_confidence_factor': 0.9435428739621232, 'atr': 176.62928571428554}}",2025-12-14T15:54:21.232569,93231.01,0.2906085614814073,TP_HIT,BTCUSDT,5m,401,401,long,93231.01,0.9435428739621232,0.7267306089401245,1.0,0.7267306089401245,1.0,1.0,none,0.0,False,no_whale,0.5,0.9435428739621232,214.49999999999895
BTCUSDT,long,0.0005211632036277745,93231.01,48.58857184905308,5m,2025-12-14T15:54:21.233204,92909.26,93874.51,0.01,214.49999999999895,93691.82,93231.01,"{'probs': {'p_used': 0.9435428739621232, 'p_single': 0.7267306089401245}, 'extra': {'mtf_debug': {'per_interval': {'1m': {'p_last': 1.0, 'weight': 0.3, 'auc': 0.49900912892628313, 'best_side': 'short', 'debug': {'mode': 'sgd_only', 'p_sgd_mean': 1.0, 'p_lstm_mean': 0.5, 'p_hybrid_mean': 1.0, 'best_auc': 0.49900912892628313, 'best_side': 'short', 'use_lstm_hybrid': True, 'lstm_used': False, 'error': 'in user code:\n\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2440, in predict_function  *\n        return step_function(self, iterator)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2425, in step_function  **\n        outputs = model.distribute_strategy.run(run_step, args=(data,))\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2413, in run_step  **\n        outputs = model.predict_step(data)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2381, in predict_step\n        return self(x, training=False)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/utils/traceback_utils.py"", line 70, in error_handler\n        raise e.with_traceback(filtered_tb) from None\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/input_spec.py"", line 298, in assert_input_compatibility\n        raise ValueError(\n\n    ValueError: Input 0 of layer ""sequential"" is incompatible with the layer: expected shape=(None, 50, 22), found shape=(None, 32, 22)\n'}}, '5m': {'p_last': 0.7267306089401245, 'weight': 0.3, 'auc': 0.5136681486331411, 'best_side': 'long', 'debug': {'mode': 'lstm+sgd', 'p_sgd_mean': 1.0, 'p_lstm_mean': 0.5445509552955627, 'p_hybrid_mean': 0.7267305808429104, 'best_auc': 0.5136681486331411, 'best_side': 'long', 'use_lstm_hybrid': True, 'lstm_used': True, 'p_long_mean': 0.9897623658180237, 'p_short_mean': 0.09933958947658539}}, '15m': {'p_last': 1.0, 'weight': 0.3, 'auc': 0.5126647075075981, 'best_side': 'long', 'debug': {'mode': 'sgd_only', 'p_sgd_mean': 1.0, 'p_lstm_mean': 0.5, 'p_hybrid_mean': 1.0, 'best_auc': 0.5126647075075981, 'best_side': 'long', 'use_lstm_hybrid': True, 'lstm_used': False, 'error': 'in user code:\n\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2440, in predict_function  *\n        return step_function(self, iterator)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2425, in step_function  **\n        outputs = model.distribute_strategy.run(run_step, args=(data,))\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2413, in run_step  **\n        outputs = model.predict_step(data)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2381, in predict_step\n        return self(x, training=False)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/utils/traceback_utils.py"", line 70, in error_handler\n        raise e.with_traceback(filtered_tb) from None\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/input_spec.py"", line 298, in assert_input_compatibility\n        raise ValueError(\n\n    ValueError: Input 0 of layer ""sequential"" is incompatible with the layer: expected shape=(None, 50, 22), found shape=(None, 32, 22)\n'}}, '1h': {'p_last': 1.0, 'weight': 0.5520898081663274, 'auc': 0.5520898081663274, 'best_side': 'long', 'debug': {'mode': 'sgd_only', 'p_sgd_mean': 1.0, 'p_lstm_mean': 0.5, 'p_hybrid_mean': 1.0, 'best_auc': 0.5520898081663274, 'best_side': 'long', 'use_lstm_hybrid': True, 'lstm_used': False, 'error': 'in user code:\n\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2440, in predict_function  *\n        return step_function(self, iterator)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2425, in step_function  **\n        outputs = model.distribute_strategy.run(run_step, args=(data,))\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2413, in run_step  **\n        outputs = model.predict_step(data)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2381, in predict_step\n        return self(x, training=False)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/utils/traceback_utils.py"", line 70, in error_handler\n        raise e.with_traceback(filtered_tb) from None\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/input_spec.py"", line 298, in assert_input_compatibility\n        raise ValueError(\n\n    ValueError: Input 0 of layer ""sequential"" is incompatible with the layer: expected shape=(None, 50, 22), found shape=(None, 32, 22)\n'}}}, 'intervals_used': ['1m', '5m', '15m', '1h'], 'weights_raw': [0.3, 0.3, 0.3, 0.5520898081663274], 'weights_norm': [0.20659879183287883, 0.20659879183287883, 0.20659879183287883, 0.3802036245013636], 'n_used': 4, 'ensemble_p': 0.9435428739621232}, 'whale_dir': 'none', 'whale_score': 0.0, 'whale_on': False, 'whale_alignment': 'no_whale', 'whale_thr': 0.5, 'model_confidence_factor': 0.9435428739621232, 'atr': 214.49999999999895}}",2025-12-14T15:55:38.072709,93912.2,0.35501116267920496,TP_HIT,BTCUSDT,5m,416,416,long,93912.2,0.9435428739621232,0.7267306089401245,1.0,0.7267306089401245,1.0,1.0,none,0.0,False,no_whale,0.5,0.9435428739621232,224.95000000000022
BTCUSDT,long,0.0005173829582211159,93912.2,48.58857184905308,5m,2025-12-14T15:55:38.127325,93574.775,94587.05,0.01,224.95000000000022,94012.75,93912.2,"{'probs': {'p_used': 0.9435428739621232, 'p_single': 0.7267306089401245}, 'extra': {'mtf_debug': {'per_interval': {'1m': {'p_last': 1.0, 'weight': 0.3, 'auc': 0.49900912892628313, 'best_side': 'short', 'debug': {'mode': 'sgd_only', 'p_sgd_mean': 1.0, 'p_lstm_mean': 0.5, 'p_hybrid_mean': 1.0, 'best_auc': 0.49900912892628313, 'best_side': 'short', 'use_lstm_hybrid': True, 'lstm_used': False, 'error': 'in user code:\n\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2440, in predict_function  *\n        return step_function(self, iterator)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2425, in step_function  **\n        outputs = model.distribute_strategy.run(run_step, args=(data,))\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2413, in run_step  **\n        outputs = model.predict_step(data)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2381, in predict_step\n        return self(x, training=False)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/utils/traceback_utils.py"", line 70, in error_handler\n        raise e.with_traceback(filtered_tb) from None\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/input_spec.py"", line 298, in assert_input_compatibility\n        raise ValueError(\n\n    ValueError: Input 0 of layer ""sequential"" is incompatible with the layer: expected shape=(None, 50, 22), found shape=(None, 32, 22)\n'}}, '5m': {'p_last': 0.7267306089401245, 'weight': 0.3, 'auc': 0.5136681486331411, 'best_side': 'long', 'debug': {'mode': 'lstm+sgd', 'p_sgd_mean': 1.0, 'p_lstm_mean': 0.544550895690918, 'p_hybrid_mean': 0.7267305809959806, 'best_auc': 0.5136681486331411, 'best_side': 'long', 'use_lstm_hybrid': True, 'lstm_used': True, 'p_long_mean': 0.9897623658180237, 'p_short_mean': 0.09933959692716599}}, '15m': {'p_last': 1.0, 'weight': 0.3, 'auc': 0.5126647075075981, 'best_side': 'long', 'debug': {'mode': 'sgd_only', 'p_sgd_mean': 1.0, 'p_lstm_mean': 0.5, 'p_hybrid_mean': 1.0, 'best_auc': 0.5126647075075981, 'best_side': 'long', 'use_lstm_hybrid': True, 'lstm_used': False, 'error': 'in user code:\n\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2440, in predict_function  *\n        return step_function(self, iterator)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2425, in step_function  **\n        outputs = model.distribute_strategy.run(run_step, args=(data,))\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2413, in run_step  **\n        outputs = model.predict_step(data)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2381, in predict_step\n        return self(x, training=False)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/utils/traceback_utils.py"", line 70, in error_handler\n        raise e.with_traceback(filtered_tb) from None\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/input_spec.py"", line 298, in assert_input_compatibility\n        raise ValueError(\n\n    ValueError: Input 0 of layer ""sequential"" is incompatible with the layer: expected shape=(None, 50, 22), found shape=(None, 32, 22)\n'}}, '1h': {'p_last': 1.0, 'weight': 0.5520898081663274, 'auc': 0.5520898081663274, 'best_side': 'long', 'debug': {'mode': 'sgd_only', 'p_sgd_mean': 1.0, 'p_lstm_mean': 0.5, 'p_hybrid_mean': 1.0, 'best_auc': 0.5520898081663274, 'best_side': 'long', 'use_lstm_hybrid': True, 'lstm_used': False, 'error': 'in user code:\n\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2440, in predict_function  *\n        return step_function(self, iterator)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2425, in step_function  **\n        outputs = model.distribute_strategy.run(run_step, args=(data,))\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2413, in run_step  **\n        outputs = model.predict_step(data)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2381, in predict_step\n        return self(x, training=False)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/utils/traceback_utils.py"", line 70, in error_handler\n        raise e.with_traceback(filtered_tb) from None\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/input_spec.py"", line 298, in assert_input_compatibility\n        raise ValueError(\n\n    ValueError: Input 0 of layer ""sequential"" is incompatible with the layer: expected shape=(None, 50, 22), found shape=(None, 32, 22)\n'}}}, 'intervals_used': ['1m', '5m', '15m', '1h'], 'weights_raw': [0.3, 0.3, 0.3, 0.5520898081663274], 'weights_norm': [0.20659879183287883, 0.20659879183287883, 0.20659879183287883, 0.3802036245013636], 'n_used': 4, 'ensemble_p': 0.9435428739621232}, 'whale_dir': 'none', 'whale_score': 0.0, 'whale_on': False, 'whale_alignment': 'no_whale', 'whale_thr': 0.5, 'model_confidence_factor': 0.9435428739621232, 'atr': 224.95000000000022}}",2025-12-14T15:56:53.204257,93545.34,-0.18980711205299888,SL_HIT,BTCUSDT,5m,431,431,long,93545.34,0.9435428678049995,0.7267305791378021,1.0,0.7267305791378021,1.0,1.0,none,0.0,False,no_whale,0.5,0.9435428678049995,172.3092857142869
BTCUSDT,long,0.0005194119952434294,93545.34,48.58857169512499,5m,2025-12-14T15:56:53.205208,93286.87607142856,94062.26785714286,0.01,172.3092857142869,93607.7,93545.34,"{'probs': {'p_used': 0.9435428678049995, 'p_single': 0.7267305791378021}, 'extra': {'mtf_debug': {'per_interval': {'1m': {'p_last': 1.0, 'weight': 0.3, 'auc': 0.49900912892628313, 'best_side': 'short', 'debug': {'mode': 'sgd_only', 'p_sgd_mean': 1.0, 'p_lstm_mean': 0.5, 'p_hybrid_mean': 1.0, 'best_auc': 0.49900912892628313, 'best_side': 'short', 'use_lstm_hybrid': True, 'lstm_used': False, 'error': 'in user code:\n\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2440, in predict_function  *\n        return step_function(self, iterator)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2425, in step_function  **\n        outputs = model.distribute_strategy.run(run_step, args=(data,))\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2413, in run_step  **\n        outputs = model.predict_step(data)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2381, in predict_step\n        return self(x, training=False)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/utils/traceback_utils.py"", line 70, in error_handler\n        raise e.with_traceback(filtered_tb) from None\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/input_spec.py"", line 298, in assert_input_compatibility\n        raise ValueError(\n\n    ValueError: Input 0 of layer ""sequential"" is incompatible with the layer: expected shape=(None, 50, 22), found shape=(None, 32, 22)\n'}}, '5m': {'p_last': 0.7267305791378021, 'weight': 0.3, 'auc': 0.5136681486331411, 'best_side': 'long', 'debug': {'mode': 'lstm+sgd', 'p_sgd_mean': 1.0, 'p_lstm_mean': 0.5445509552955627, 'p_hybrid_mean': 0.7267305807934868, 'best_auc': 0.5136681486331411, 'best_side': 'long', 'use_lstm_hybrid': True, 'lstm_used': True, 'p_long_mean': 0.9897623658180237, 'p_short_mean': 0.09933959692716599}}, '15m': {'p_last': 1.0, 'weight': 0.3, 'auc': 0.5126647075075981, 'best_side': 'long', 'debug': {'mode': 'sgd_only', 'p_sgd_mean': 1.0, 'p_lstm_mean': 0.5, 'p_hybrid_mean': 1.0, 'best_auc': 0.5126647075075981, 'best_side': 'long', 'use_lstm_hybrid': True, 'lstm_used': False, 'error': 'in user code:\n\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2440, in predict_function  *\n        return step_function(self, iterator)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2425, in step_function  **\n        outputs = model.distribute_strategy.run(run_step, args=(data,))\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2413, in run_step  **\n        outputs = model.predict_step(data)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2381, in predict_step\n        return self(x, training=False)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/utils/traceback_utils.py"", line 70, in error_handler\n        raise e.with_traceback(filtered_tb) from None\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/input_spec.py"", line 298, in assert_input_compatibility\n        raise ValueError(\n\n    ValueError: Input 0 of layer ""sequential"" is incompatible with the layer: expected shape=(None, 50, 22), found shape=(None, 32, 22)\n'}}, '1h': {'p_last': 1.0, 'weight': 0.5520898081663274, 'auc': 0.5520898081663274, 'best_side': 'long', 'debug': {'mode': 'sgd_only', 'p_sgd_mean': 1.0, 'p_lstm_mean': 0.5, 'p_hybrid_mean': 1.0, 'best_auc': 0.5520898081663274, 'best_side': 'long', 'use_lstm_hybrid': True, 'lstm_used': False, 'error': 'in user code:\n\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2440, in predict_function  *\n        return step_function(self, iterator)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2425, in step_function  **\n        outputs = model.distribute_strategy.run(run_step, args=(data,))\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2413, in run_step  **\n        outputs = model.predict_step(data)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2381, in predict_step\n        return self(x, training=False)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/utils/traceback_utils.py"", line 70, in error_handler\n        raise e.with_traceback(filtered_tb) from None\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/input_spec.py"", line 298, in assert_input_compatibility\n        raise ValueError(\n\n    ValueError: Input 0 of layer ""sequential"" is incompatible with the layer: expected shape=(None, 50, 22), found shape=(None, 32, 22)\n'}}}, 'intervals_used': ['1m', '5m', '15m', '1h'], 'weights_raw': [0.3, 0.3, 0.3, 0.5520898081663274], 'weights_norm': [0.20659879183287883, 0.20659879183287883, 0.20659879183287883, 0.3802036245013636], 'n_used': 4, 'ensemble_p': 0.9435428678049995}, 'whale_dir': 'none', 'whale_score': 0.0, 'whale_on': False, 'whale_alignment': 'no_whale', 'whale_thr': 0.5, 'model_confidence_factor': 0.9435428678049995, 'atr': 172.3092857142869}}",2025-12-14T15:58:29.862239,93130.11,-0.2156754427849271,SL_HIT,BTCUSDT,5m,450,450,long,93130.11,0.9435428678049995,0.7267305791378021,1.0,0.7267305791378021,1.0,1.0,none,0.0,False,no_whale,0.5,0.9435428678049995,130.1435714285721
BTCUSDT,long,0.0005217278460760434,93130.11,48.58857169512499,5m,2025-12-14T15:58:30.051417,92934.89464285714,93520.54071428571,0.01,130.1435714285721,93203.68,93130.11,"{'probs': {'p_used': 0.9435428678049995, 'p_single': 0.7267305791378021}, 'extra': {'mtf_debug': {'per_interval': {'1m': {'p_last': 1.0, 'weight': 0.3, 'auc': 0.49900912892628313, 'best_side': 'short', 'debug': {'mode': 'sgd_only', 'p_sgd_mean': 1.0, 'p_lstm_mean': 0.5, 'p_hybrid_mean': 1.0, 'best_auc': 0.49900912892628313, 'best_side': 'short', 'use_lstm_hybrid': True, 'lstm_used': False, 'error': 'in user code:\n\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2440, in predict_function  *\n        return step_function(self, iterator)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2425, in step_function  **\n        outputs = model.distribute_strategy.run(run_step, args=(data,))\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2413, in run_step  **\n        outputs = model.predict_step(data)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2381, in predict_step\n        return self(x, training=False)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/utils/traceback_utils.py"", line 70, in error_handler\n        raise e.with_traceback(filtered_tb) from None\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/input_spec.py"", line 298, in assert_input_compatibility\n        raise ValueError(\n\n    ValueError: Input 0 of layer ""sequential"" is incompatible with the layer: expected shape=(None, 50, 22), found shape=(None, 32, 22)\n'}}, '5m': {'p_last': 0.7267305791378021, 'weight': 0.3, 'auc': 0.5136681486331411, 'best_side': 'long', 'debug': {'mode': 'lstm+sgd', 'p_sgd_mean': 1.0, 'p_lstm_mean': 0.5445509552955627, 'p_hybrid_mean': 0.7267305808558963, 'best_auc': 0.5136681486331411, 'best_side': 'long', 'use_lstm_hybrid': True, 'lstm_used': True, 'p_long_mean': 0.9897623658180237, 'p_short_mean': 0.09933959692716599}}, '15m': {'p_last': 1.0, 'weight': 0.3, 'auc': 0.5126647075075981, 'best_side': 'long', 'debug': {'mode': 'sgd_only', 'p_sgd_mean': 1.0, 'p_lstm_mean': 0.5, 'p_hybrid_mean': 1.0, 'best_auc': 0.5126647075075981, 'best_side': 'long', 'use_lstm_hybrid': True, 'lstm_used': False, 'error': 'in user code:\n\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2440, in predict_function  *\n        return step_function(self, iterator)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2425, in step_function  **\n        outputs = model.distribute_strategy.run(run_step, args=(data,))\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2413, in run_step  **\n        outputs = model.predict_step(data)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2381, in predict_step\n        return self(x, training=False)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/utils/traceback_utils.py"", line 70, in error_handler\n        raise e.with_traceback(filtered_tb) from None\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/input_spec.py"", line 298, in assert_input_compatibility\n        raise ValueError(\n\n    ValueError: Input 0 of layer ""sequential"" is incompatible with the layer: expected shape=(None, 50, 22), found shape=(None, 32, 22)\n'}}, '1h': {'p_last': 1.0, 'weight': 0.5520898081663274, 'auc': 0.5520898081663274, 'best_side': 'long', 'debug': {'mode': 'sgd_only', 'p_sgd_mean': 1.0, 'p_lstm_mean': 0.5, 'p_hybrid_mean': 1.0, 'best_auc': 0.5520898081663274, 'best_side': 'long', 'use_lstm_hybrid': True, 'lstm_used': False, 'error': 'in user code:\n\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2440, in predict_function  *\n        return step_function(self, iterator)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2425, in step_function  **\n        outputs = model.distribute_strategy.run(run_step, args=(data,))\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2413, in run_step  **\n        outputs = model.predict_step(data)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2381, in predict_step\n        return self(x, training=False)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/utils/traceback_utils.py"", line 70, in error_handler\n        raise e.with_traceback(filtered_tb) from None\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/input_spec.py"", line 298, in assert_input_compatibility\n        raise ValueError(\n\n    ValueError: Input 0 of layer ""sequential"" is incompatible with the layer: expected shape=(None, 50, 22), found shape=(None, 32, 22)\n'}}}, 'intervals_used': ['1m', '5m', '15m', '1h'], 'weights_raw': [0.3, 0.3, 0.3, 0.5520898081663274], 'weights_norm': [0.20659879183287883, 0.20659879183287883, 0.20659879183287883, 0.3802036245013636], 'n_used': 4, 'ensemble_p': 0.9435428678049995}, 'whale_dir': 'none', 'whale_score': 0.0, 'whale_on': False, 'whale_alignment': 'no_whale', 'whale_thr': 0.5, 'model_confidence_factor': 0.9435428678049995, 'atr': 130.1435714285721}}",2025-12-14T15:59:19.101527,92870.0,-0.13570663004283995,SL_HIT,BTCUSDT,5m,459,459,long,92870.0,0.9435428739621232,0.7267306089401245,1.0,0.7267306089401245,1.0,1.0,short,0.8341136660086511,True,opposed,0.5,0.28306286218863697,133.06857142857294
BTCUSDT,long,0.00011491510930032937,92870.0,10.67216620072159,5m,2025-12-14T15:59:19.102129,92670.39714285714,93269.20571428572,0.01,133.06857142857294,93206.39,92870.0,"{'probs': {'p_used': 0.9435428739621232, 'p_single': 0.7267306089401245}, 'extra': {'mtf_debug': {'per_interval': {'1m': {'p_last': 1.0, 'weight': 0.3, 'auc': 0.49900912892628313, 'best_side': 'short', 'debug': {'mode': 'sgd_only', 'p_sgd_mean': 1.0, 'p_lstm_mean': 0.5, 'p_hybrid_mean': 1.0, 'best_auc': 0.49900912892628313, 'best_side': 'short', 'use_lstm_hybrid': True, 'lstm_used': False, 'error': 'in user code:\n\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2440, in predict_function  *\n        return step_function(self, iterator)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2425, in step_function  **\n        outputs = model.distribute_strategy.run(run_step, args=(data,))\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2413, in run_step  **\n        outputs = model.predict_step(data)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2381, in predict_step\n        return self(x, training=False)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/utils/traceback_utils.py"", line 70, in error_handler\n        raise e.with_traceback(filtered_tb) from None\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/input_spec.py"", line 298, in assert_input_compatibility\n        raise ValueError(\n\n    ValueError: Input 0 of layer ""sequential"" is incompatible with the layer: expected shape=(None, 50, 22), found shape=(None, 32, 22)\n'}}, '5m': {'p_last': 0.7267306089401245, 'weight': 0.3, 'auc': 0.5136681486331411, 'best_side': 'long', 'debug': {'mode': 'lstm+sgd', 'p_sgd_mean': 1.0, 'p_lstm_mean': 0.544550895690918, 'p_hybrid_mean': 0.7267305808870691, 'best_auc': 0.5136681486331411, 'best_side': 'long', 'use_lstm_hybrid': True, 'lstm_used': True, 'p_long_mean': 0.9897623658180237, 'p_short_mean': 0.09933959692716599}}, '15m': {'p_last': 1.0, 'weight': 0.3, 'auc': 0.5126647075075981, 'best_side': 'long', 'debug': {'mode': 'sgd_only', 'p_sgd_mean': 1.0, 'p_lstm_mean': 0.5, 'p_hybrid_mean': 1.0, 'best_auc': 0.5126647075075981, 'best_side': 'long', 'use_lstm_hybrid': True, 'lstm_used': False, 'error': 'in user code:\n\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2440, in predict_function  *\n        return step_function(self, iterator)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2425, in step_function  **\n        outputs = model.distribute_strategy.run(run_step, args=(data,))\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2413, in run_step  **\n        outputs = model.predict_step(data)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2381, in predict_step\n        return self(x, training=False)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/utils/traceback_utils.py"", line 70, in error_handler\n        raise e.with_traceback(filtered_tb) from None\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/input_spec.py"", line 298, in assert_input_compatibility\n        raise ValueError(\n\n    ValueError: Input 0 of layer ""sequential"" is incompatible with the layer: expected shape=(None, 50, 22), found shape=(None, 32, 22)\n'}}, '1h': {'p_last': 1.0, 'weight': 0.5520898081663274, 'auc': 0.5520898081663274, 'best_side': 'long', 'debug': {'mode': 'sgd_only', 'p_sgd_mean': 1.0, 'p_lstm_mean': 0.5, 'p_hybrid_mean': 1.0, 'best_auc': 0.5520898081663274, 'best_side': 'long', 'use_lstm_hybrid': True, 'lstm_used': False, 'error': 'in user code:\n\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2440, in predict_function  *\n        return step_function(self, iterator)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2425, in step_function  **\n        outputs = model.distribute_strategy.run(run_step, args=(data,))\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2413, in run_step  **\n        outputs = model.predict_step(data)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2381, in predict_step\n        return self(x, training=False)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/utils/traceback_utils.py"", line 70, in error_handler\n        raise e.with_traceback(filtered_tb) from None\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/input_spec.py"", line 298, in assert_input_compatibility\n        raise ValueError(\n\n    ValueError: Input 0 of layer ""sequential"" is incompatible with the layer: expected shape=(None, 50, 22), found shape=(None, 32, 22)\n'}}}, 'intervals_used': ['1m', '5m', '15m', '1h'], 'weights_raw': [0.3, 0.3, 0.3, 0.5520898081663274], 'weights_norm': [0.20659879183287883, 0.20659879183287883, 0.20659879183287883, 0.3802036245013636], 'n_used': 4, 'ensemble_p': 0.9435428739621232}, 'whale_dir': 'short', 'whale_score': 0.8341136660086511, 'whale_on': True, 'whale_alignment': 'opposed', 'whale_thr': 0.5, 'model_confidence_factor': 0.28306286218863697, 'atr': 133.06857142857294}}",2025-12-14T16:00:00.749502,93343.55,0.05441805000917131,TP_HIT,BTCUSDT,5m,467,467,long,93343.55,0.9435428678049995,0.7267305791378021,1.0,0.7267305791378021,1.0,1.0,none,0.0,False,no_whale,0.5,0.9435428678049995,128.0435714285725
BTCUSDT,long,0.0005205348596140279,93343.55,48.58857169512499,5m,2025-12-14T16:00:00.750316,93151.48464285715,93727.68071428571,0.01,128.0435714285725,93343.55,93343.55,"{'probs': {'p_used': 0.9435428678049995, 'p_single': 0.7267305791378021}, 'extra': {'mtf_debug': {'per_interval': {'1m': {'p_last': 1.0, 'weight': 0.3, 'auc': 0.49900912892628313, 'best_side': 'short', 'debug': {'mode': 'sgd_only', 'p_sgd_mean': 1.0, 'p_lstm_mean': 0.5, 'p_hybrid_mean': 1.0, 'best_auc': 0.49900912892628313, 'best_side': 'short', 'use_lstm_hybrid': True, 'lstm_used': False, 'error': 'in user code:\n\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2440, in predict_function  *\n        return step_function(self, iterator)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2425, in step_function  **\n        outputs = model.distribute_strategy.run(run_step, args=(data,))\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2413, in run_step  **\n        outputs = model.predict_step(data)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2381, in predict_step\n        return self(x, training=False)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/utils/traceback_utils.py"", line 70, in error_handler\n        raise e.with_traceback(filtered_tb) from None\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/input_spec.py"", line 298, in assert_input_compatibility\n        raise ValueError(\n\n    ValueError: Input 0 of layer ""sequential"" is incompatible with the layer: expected shape=(None, 50, 22), found shape=(None, 32, 22)\n'}}, '5m': {'p_last': 0.7267305791378021, 'weight': 0.3, 'auc': 0.5136681486331411, 'best_side': 'long', 'debug': {'mode': 'lstm+sgd', 'p_sgd_mean': 1.0, 'p_lstm_mean': 0.544550895690918, 'p_hybrid_mean': 0.7267305807934871, 'best_auc': 0.5136681486331411, 'best_side': 'long', 'use_lstm_hybrid': True, 'lstm_used': True, 'p_long_mean': 0.9897623658180237, 'p_short_mean': 0.09933959692716599}}, '15m': {'p_last': 1.0, 'weight': 0.3, 'auc': 0.5126647075075981, 'best_side': 'long', 'debug': {'mode': 'sgd_only', 'p_sgd_mean': 1.0, 'p_lstm_mean': 0.5, 'p_hybrid_mean': 1.0, 'best_auc': 0.5126647075075981, 'best_side': 'long', 'use_lstm_hybrid': True, 'lstm_used': False, 'error': 'in user code:\n\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2440, in predict_function  *\n        return step_function(self, iterator)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2425, in step_function  **\n        outputs = model.distribute_strategy.run(run_step, args=(data,))\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2413, in run_step  **\n        outputs = model.predict_step(data)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2381, in predict_step\n        return self(x, training=False)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/utils/traceback_utils.py"", line 70, in error_handler\n        raise e.with_traceback(filtered_tb) from None\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/input_spec.py"", line 298, in assert_input_compatibility\n        raise ValueError(\n\n    ValueError: Input 0 of layer ""sequential"" is incompatible with the layer: expected shape=(None, 50, 22), found shape=(None, 32, 22)\n'}}, '1h': {'p_last': 1.0, 'weight': 0.5520898081663274, 'auc': 0.5520898081663274, 'best_side': 'long', 'debug': {'mode': 'sgd_only', 'p_sgd_mean': 1.0, 'p_lstm_mean': 0.5, 'p_hybrid_mean': 1.0, 'best_auc': 0.5520898081663274, 'best_side': 'long', 'use_lstm_hybrid': True, 'lstm_used': False, 'error': 'in user code:\n\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2440, in predict_function  *\n        return step_function(self, iterator)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2425, in step_function  **\n        outputs = model.distribute_strategy.run(run_step, args=(data,))\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2413, in run_step  **\n        outputs = model.predict_step(data)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2381, in predict_step\n        return self(x, training=False)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/utils/traceback_utils.py"", line 70, in error_handler\n        raise e.with_traceback(filtered_tb) from None\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/input_spec.py"", line 298, in assert_input_compatibility\n        raise ValueError(\n\n    ValueError: Input 0 of layer ""sequential"" is incompatible with the layer: expected shape=(None, 50, 22), found shape=(None, 32, 22)\n'}}}, 'intervals_used': ['1m', '5m', '15m', '1h'], 'weights_raw': [0.3, 0.3, 0.3, 0.5520898081663274], 'weights_norm': [0.20659879183287883, 0.20659879183287883, 0.20659879183287883, 0.3802036245013636], 'n_used': 4, 'ensemble_p': 0.9435428678049995}, 'whale_dir': 'none', 'whale_score': 0.0, 'whale_on': False, 'whale_alignment': 'no_whale', 'whale_thr': 0.5, 'model_confidence_factor': 0.9435428678049995, 'atr': 128.0435714285725}}",2025-12-14T16:00:12.126553,93120.99,-0.11585023835569683,SL_HIT,BTCUSDT,5m,469,469,long,93120.99,0.9435428678049995,0.7267305791378021,1.0,0.7267305791378021,1.0,1.0,short,1.0,True,opposed,0.5,0.28306286034149986,132.0178571428582
BTCUSDT,long,0.00010738717447054632,93120.99,10.0,5m,2025-12-14T16:00:12.317260,92922.96321428572,93517.04357142858,0.01,132.0178571428582,93397.67,93120.99,"{'probs': {'p_used': 0.9435428678049995, 'p_single': 0.7267305791378021}, 'extra': {'mtf_debug': {'per_interval': {'1m': {'p_last': 1.0, 'weight': 0.3, 'auc': 0.49900912892628313, 'best_side': 'short', 'debug': {'mode': 'sgd_only', 'p_sgd_mean': 1.0, 'p_lstm_mean': 0.5, 'p_hybrid_mean': 1.0, 'best_auc': 0.49900912892628313, 'best_side': 'short', 'use_lstm_hybrid': True, 'lstm_used': False, 'error': 'in user code:\n\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2440, in predict_function  *\n        return step_function(self, iterator)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2425, in step_function  **\n        outputs = model.distribute_strategy.run(run_step, args=(data,))\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2413, in run_step  **\n        outputs = model.predict_step(data)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2381, in predict_step\n        return self(x, training=False)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/utils/traceback_utils.py"", line 70, in error_handler\n        raise e.with_traceback(filtered_tb) from None\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/input_spec.py"", line 298, in assert_input_compatibility\n        raise ValueError(\n\n    ValueError: Input 0 of layer ""sequential"" is incompatible with the layer: expected shape=(None, 50, 22), found shape=(None, 32, 22)\n'}}, '5m': {'p_last': 0.7267305791378021, 'weight': 0.3, 'auc': 0.5136681486331411, 'best_side': 'long', 'debug': {'mode': 'lstm+sgd', 'p_sgd_mean': 1.0, 'p_lstm_mean': 0.544550895690918, 'p_hybrid_mean': 0.7267305807864416, 'best_auc': 0.5136681486331411, 'best_side': 'long', 'use_lstm_hybrid': True, 'lstm_used': True, 'p_long_mean': 0.9897623658180237, 'p_short_mean': 0.09933959692716599}}, '15m': {'p_last': 1.0, 'weight': 0.3, 'auc': 0.5126647075075981, 'best_side': 'long', 'debug': {'mode': 'sgd_only', 'p_sgd_mean': 1.0, 'p_lstm_mean': 0.5, 'p_hybrid_mean': 1.0, 'best_auc': 0.5126647075075981, 'best_side': 'long', 'use_lstm_hybrid': True, 'lstm_used': False, 'error': 'in user code:\n\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2440, in predict_function  *\n        return step_function(self, iterator)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2425, in step_function  **\n        outputs = model.distribute_strategy.run(run_step, args=(data,))\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2413, in run_step  **\n        outputs = model.predict_step(data)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2381, in predict_step\n        return self(x, training=False)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/utils/traceback_utils.py"", line 70, in error_handler\n        raise e.with_traceback(filtered_tb) from None\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/input_spec.py"", line 298, in assert_input_compatibility\n        raise ValueError(\n\n    ValueError: Input 0 of layer ""sequential"" is incompatible with the layer: expected shape=(None, 50, 22), found shape=(None, 32, 22)\n'}}, '1h': {'p_last': 1.0, 'weight': 0.5520898081663274, 'auc': 0.5520898081663274, 'best_side': 'long', 'debug': {'mode': 'sgd_only', 'p_sgd_mean': 1.0, 'p_lstm_mean': 0.5, 'p_hybrid_mean': 1.0, 'best_auc': 0.5520898081663274, 'best_side': 'long', 'use_lstm_hybrid': True, 'lstm_used': False, 'error': 'in user code:\n\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2440, in predict_function  *\n        return step_function(self, iterator)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2425, in step_function  **\n        outputs = model.distribute_strategy.run(run_step, args=(data,))\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2413, in run_step  **\n        outputs = model.predict_step(data)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2381, in predict_step\n        return self(x, training=False)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/utils/traceback_utils.py"", line 70, in error_handler\n        raise e.with_traceback(filtered_tb) from None\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/input_spec.py"", line 298, in assert_input_compatibility\n        raise ValueError(\n\n    ValueError: Input 0 of layer ""sequential"" is incompatible with the layer: expected shape=(None, 50, 22), found shape=(None, 32, 22)\n'}}}, 'intervals_used': ['1m', '5m', '15m', '1h'], 'weights_raw': [0.3, 0.3, 0.3, 0.5520898081663274], 'weights_norm': [0.20659879183287883, 0.20659879183287883, 0.20659879183287883, 0.3802036245013636], 'n_used': 4, 'ensemble_p': 0.9435428678049995}, 'whale_dir': 'short', 'whale_score': 1.0, 'whale_on': True, 'whale_alignment': 'opposed', 'whale_thr': 0.5, 'model_confidence_factor': 0.28306286034149986, 'atr': 132.0178571428582}}",2025-12-14T16:01:35.637940,93581.21,0.04942172543483495,TP_HIT,BTCUSDT,5m,485,485,long,93581.21,0.9435428739621232,0.7267306089401245,1.0,0.7267306089401245,1.0,1.0,none,0.0,False,no_whale,0.5,0.9435428739621232,121.47714285714339
BTCUSDT,long,0.0005192129044821399,93581.21,48.58857184905308,5m,2025-12-14T16:01:35.639107,93398.99428571429,93945.64142857144,0.01,121.47714285714339,93581.21,93581.21,"{'probs': {'p_used': 0.9435428739621232, 'p_single': 0.7267306089401245}, 'extra': {'mtf_debug': {'per_interval': {'1m': {'p_last': 1.0, 'weight': 0.3, 'auc': 0.49900912892628313, 'best_side': 'short', 'debug': {'mode': 'sgd_only', 'p_sgd_mean': 1.0, 'p_lstm_mean': 0.5, 'p_hybrid_mean': 1.0, 'best_auc': 0.49900912892628313, 'best_side': 'short', 'use_lstm_hybrid': True, 'lstm_used': False, 'error': 'in user code:\n\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2440, in predict_function  *\n        return step_function(self, iterator)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2425, in step_function  **\n        outputs = model.distribute_strategy.run(run_step, args=(data,))\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2413, in run_step  **\n        outputs = model.predict_step(data)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2381, in predict_step\n        return self(x, training=False)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/utils/traceback_utils.py"", line 70, in error_handler\n        raise e.with_traceback(filtered_tb) from None\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/input_spec.py"", line 298, in assert_input_compatibility\n        raise ValueError(\n\n    ValueError: Input 0 of layer ""sequential"" is incompatible with the layer: expected shape=(None, 50, 22), found shape=(None, 32, 22)\n'}}, '5m': {'p_last': 0.7267306089401245, 'weight': 0.3, 'auc': 0.5136681486331411, 'best_side': 'long', 'debug': {'mode': 'lstm+sgd', 'p_sgd_mean': 1.0, 'p_lstm_mean': 0.544550895690918, 'p_hybrid_mean': 0.7267305809161303, 'best_auc': 0.5136681486331411, 'best_side': 'long', 'use_lstm_hybrid': True, 'lstm_used': True, 'p_long_mean': 0.9897623062133789, 'p_short_mean': 0.09933959692716599}}, '15m': {'p_last': 1.0, 'weight': 0.3, 'auc': 0.5126647075075981, 'best_side': 'long', 'debug': {'mode': 'sgd_only', 'p_sgd_mean': 1.0, 'p_lstm_mean': 0.5, 'p_hybrid_mean': 1.0, 'best_auc': 0.5126647075075981, 'best_side': 'long', 'use_lstm_hybrid': True, 'lstm_used': False, 'error': 'in user code:\n\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2440, in predict_function  *\n        return step_function(self, iterator)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2425, in step_function  **\n        outputs = model.distribute_strategy.run(run_step, args=(data,))\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2413, in run_step  **\n        outputs = model.predict_step(data)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2381, in predict_step\n        return self(x, training=False)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/utils/traceback_utils.py"", line 70, in error_handler\n        raise e.with_traceback(filtered_tb) from None\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/input_spec.py"", line 298, in assert_input_compatibility\n        raise ValueError(\n\n    ValueError: Input 0 of layer ""sequential"" is incompatible with the layer: expected shape=(None, 50, 22), found shape=(None, 32, 22)\n'}}, '1h': {'p_last': 1.0, 'weight': 0.5520898081663274, 'auc': 0.5520898081663274, 'best_side': 'long', 'debug': {'mode': 'sgd_only', 'p_sgd_mean': 1.0, 'p_lstm_mean': 0.5, 'p_hybrid_mean': 1.0, 'best_auc': 0.5520898081663274, 'best_side': 'long', 'use_lstm_hybrid': True, 'lstm_used': False, 'error': 'in user code:\n\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2440, in predict_function  *\n        return step_function(self, iterator)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2425, in step_function  **\n        outputs = model.distribute_strategy.run(run_step, args=(data,))\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2413, in run_step  **\n        outputs = model.predict_step(data)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/training.py"", line 2381, in predict_step\n        return self(x, training=False)\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/utils/traceback_utils.py"", line 70, in error_handler\n        raise e.with_traceback(filtered_tb) from None\n    File ""/home/kasm920/venv/lib/python3.11/site-packages/keras/src/engine/input_spec.py"", line 298, in assert_input_compatibility\n        raise ValueError(\n\n    ValueError: Input 0 of layer ""sequential"" is incompatible with the layer: expected shape=(None, 50, 22), found shape=(None, 32, 22)\n'}}}, 'intervals_used': ['1m', '5m', '15m', '1h'], 'weights_raw': [0.3, 0.3, 0.3, 0.5520898081663274], 'weights_norm': [0.20659879183287883, 0.20659879183287883, 0.20659879183287883, 0.3802036245013636], 'n_used': 4, 'ensemble_p': 0.9435428739621232}, 'whale_dir': 'none', 'whale_score': 0.0, 'whale_on': False, 'whale_alignment': 'no_whale', 'whale_thr': 0.5, 'model_confidence_factor': 0.9435428739621232, 'atr': 121.47714285714339}}",2025-12-14T16:01:40.704925,93262.0,-0.16573795123974722,SL_HIT,BTCUSDT,5m,486,486,long,93262.0,0.9435428739621232,0.7267306089401245,1.0,0.7267306089401245,1.0,1.0,none,0.0,False,no_whale,0.5,0.9435428739621232,141.47142857142794
